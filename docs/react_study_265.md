# ç¬¬265ç« ï¼šLint ãƒ«ãƒ¼ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ã“ã®ç« ã§ã¯ã€Biome ã® **Lintï¼ˆã‚³ãƒ¼ãƒ‰ã®æ³¨æ„ãƒ»ãƒã‚°ã£ã½ã„æ‰€ã‚’è¦‹ã¤ã‘ã‚‹ã‚„ã¤ï¼‰** ã‚’ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã†æ€§æ ¼ã€ã«èª¿æ•´ã—ã¦ã„ãã‚ˆã€œï¼ğŸ§©ğŸ’¡
React é–‹ç™ºã ã¨ã€Œã“ã“ã¯å³ã—ã‚ã«ã—ãŸã„ã€ã€Œã“ã“ã¯ã‚†ã‚‹ãã—ãŸã„ã€ãŒçµ¶å¯¾å‡ºã‚‹ã®ã§ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã¨ã‚ã¡ã‚ƒå®‰å¿ƒğŸ˜ŒğŸ«¶

---

## 1) ã¾ãšã¯å…¨ä½“åƒï¼šã©ã“ã§ä½•ã‚’è¨­å®šã™ã‚‹ã®ï¼ŸğŸ—ºï¸

Biome ã®ãƒ«ãƒ¼ãƒ«è¨­å®šã¯ã€åŸºæœ¬ **`biome.json` / `biome.jsonc` ã® `linter.rules`** ã«æ›¸ãã‚ˆâœï¸
ãƒ«ãƒ¼ãƒ«ã¯ã€Œã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰ã€ã«åˆ†ã‹ã‚Œã¦ã¦ã€ä»£è¡¨çš„ã«ã¯ã“ã‚“ãªæ„Ÿã˜ğŸ‘‡ï¼ˆa11y / correctness / style / suspiciousâ€¦ãªã©ï¼‰([Biome][1])

* âœ… **recommended**ï¼šãŠã™ã™ã‚ã‚»ãƒƒãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ï¼‰([Biome][1])
* ğŸ›ï¸ **ã‚°ãƒ«ãƒ¼ãƒ—å˜ä½**ã§ ON/OFF ã‚„ severityï¼ˆwarn/error ãªã©ï¼‰ã‚’ä¸€æ‹¬èª¿æ•´
* ğŸ¯ **ãƒ«ãƒ¼ãƒ«å˜ä½“**ã§ severityï¼ˆwarn/error/off ãªã©ï¼‰ã‚„ options ã‚’æŒ‡å®š
* ğŸ§· **overrides** ã§ã€Œç‰¹å®šãƒ•ã‚©ãƒ«ãƒ€ãƒ»ç‰¹å®šæ‹¡å¼µå­ã ã‘ã€è¨­å®šã‚’å¤‰ãˆã‚‹ï¼ˆè¶…é‡è¦ï¼ï¼‰([Biome][1])

å›³ã«ã™ã‚‹ã¨ã“ã‚“ãªæµã‚Œã ã‚ˆğŸ‘‡

```mermaid
flowchart TD
  A[ãƒ™ãƒ¼ã‚¹è¨­å®š: linter.rules] --> B[ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š: suspicious / style / correctness...]
  B --> C[ãƒ«ãƒ¼ãƒ«å˜ä½“è¨­å®š: noConsole ãªã©]
  C --> D[overrides: ç‰¹å®šãƒ‘ã‚¹ã ã‘åˆ¥è¨­å®š]
  D --> E[VS Code / CLI ã§è¨ºæ–­è¡¨ç¤º]
```
![Biome Lint Rule Configuration](./picture/react_study_265_lint_rules.png)

---

## 2) ãƒ«ãƒ¼ãƒ«ã®ã€Œå¼·ã•ï¼ˆseverityï¼‰ã€ã‚’çŸ¥ã‚ã†ğŸ”¥â¡ï¸ğŸ§Š

ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆä¾‹ï¼š`a11y`ï¼‰ã¯ **æ–‡å­—åˆ—ã§ severity ã‚’ä¸€æ‹¬æŒ‡å®š**ã§ãã‚‹ã‚ˆï¼
ä½¿ãˆã‚‹å€¤ã¯ `on/off/info/warn/error` ãªã©ã€‚`on` ã¯ã€Œãƒ«ãƒ¼ãƒ«æœ¬æ¥ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼·ã•ã§å‡ºã—ã¦ã­ã€ã£ã¦æ„å‘³âœ¨([Biome][1])

ãŸã¨ãˆã°ã€Œã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç³»ã¯ä»Šã¯è»½ã‚ã« info ã§è¦‹ãŸã„ãªã€œã€ãªã‚‰ã“ã†ğŸ‘‡

```jsonc
{
  "linter": {
    "enabled": true,
    "rules": {
      "a11y": "info"
    }
  }
}
```

---

## 3) â€œãŠã™ã™ã‚ã‚»ãƒƒãƒˆâ€ ã‚’è»¸ã«ã—ã¦ã€å¿…è¦ãªãƒ«ãƒ¼ãƒ«ã ã‘è¿½åŠ ã™ã‚‹ğŸ¥—â•ğŸ–

### âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ recommended ãŒ ON

`linter.rules.recommended` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ `true`ï¼ˆãŠã™ã™ã‚ãƒ«ãƒ¼ãƒ«ãŒæœ‰åŠ¹ï¼‰ã ã‚ˆ([Biome][1])
ã“ã“ã‚’è»¸ã«ã—ã¦ã€ã€ŒãŠã™ã™ã‚ã«å…¥ã£ã¦ãªã„ã‘ã©æ¬²ã—ã„ã€ãƒ«ãƒ¼ãƒ«ã‚’è¶³ã—ã¦ã„ãã®ãŒè¶…ã‚„ã‚Šã‚„ã™ã„ğŸ§ âœ¨

---

## 4) å®Ÿè·µâ‘ ï¼šconsole ã‚’ç¦æ­¢ã—ãŸã„ï¼ˆã§ã‚‚ error/warn ã¯è¨±ã—ãŸã„ï¼‰ğŸ§¯ğŸªµ

![react study 265 rule config](./picture/react_study_265_rule_config.png)

ãƒ•ãƒ­ãƒ³ãƒˆã£ã¦ã€ã¤ã„ `console.log()` ç½®ããŒã¡ã ã‚ˆã­ğŸ˜‚
Biome ã«ã¯ **`noConsole`** ãŒã‚ã£ã¦ã€ã“ã‚Œã¯ **ãŠã™ã™ã‚ã§ã¯ãªã„ã®ã§è‡ªåˆ†ã§æœ‰åŠ¹åŒ–ãŒå¿…è¦**ã ã‚ˆã€œ([Biome][2])

### 4-1) ã¾ãšã¯ â€œç¦æ­¢ï¼ˆerrorï¼‰â€ ã«ã™ã‚‹ğŸš«

```jsonc
{
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noConsole": "error"
      }
    }
  }
}
```

### 4-2) ã§ã‚‚ `console.error` ã¨ã‹ã¯è¨±ã—ãŸã„ğŸ™†â€â™€ï¸

`noConsole` ã¯ options ã§ã€Œè¨±å¯ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã€ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆğŸ§°âœ¨([Biome][2])

```jsonc
{
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noConsole": {
          "level": "error",
          "options": {
            "allow": ["assert", "error", "info", "warn"]
          }
        }
      }
    }
  }
}
```

> ã“ã‚Œã§ `console.log` ã¯æ€’ã‚‰ã‚Œã‚‹ã‘ã©ã€`console.error` ã¯OKã«ã§ãã‚‹ã‚ˆğŸ™‚â€â†•ï¸âœ¨

---

## 5) å®Ÿè·µâ‘¡ï¼šæœªä½¿ç”¨ã®å¼•æ•°ã¯ â€œerrorâ€ ã«æ ¼ä¸Šã’ã—ãŸã„ï¼ˆãƒãƒ¼ãƒ ã§å³ã—ã‚ï¼‰ğŸ‘€âš¡

Biome ã®ãƒ«ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã«ã¯ã€Œã©ã†è¨­å®šã™ã‚‹ã‹ã€ã®ä¾‹ãŒè¼‰ã£ã¦ã‚‹ã“ã¨ãŒå¤šã„ã‚ˆï¼
ãŸã¨ãˆã° `noUnusedFunctionParameters` ã¯ã“ã†ã‚„ã£ã¦ `correctness` ã‚°ãƒ«ãƒ¼ãƒ—ã«æ›¸ãã®ãŒåŸºæœ¬å½¢ğŸ‘‡([Biome][3])

```jsonc
{
  "linter": {
    "rules": {
      "correctness": {
        "noUnusedFunctionParameters": "error"
      }
    }
  }
}
```

> ã¡ãªã¿ã«ã“ã®ãƒ«ãƒ¼ãƒ«ã€ã€Œä½¿ã‚ãªã„å¼•æ•°ã¯ `_` ã§å§‹ã‚ã‚‹ã¨OKã€ã¿ãŸã„ãªé€ƒã’é“ã‚‚ç”¨æ„ã•ã‚Œã¦ã‚‹ã®ãŒå„ªã—ã„ğŸ¥¹ğŸ«¶([Biome][3])

---

## 6) å®Ÿè·µâ‘¢ï¼šReact Hooks ã®ä¾å­˜é…åˆ—ãƒã‚§ãƒƒã‚¯ã‚’ â€œè‡ªåˆ†ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯â€ ã«ã‚‚åŠ¹ã‹ã›ãŸã„ğŸªâœ¨

`useEffect` ã®ä¾å­˜é…åˆ—ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã‚‹ **`useExhaustiveDependencies`** ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆï¼
è¨­å®šä¾‹ï¼ˆhooks é…åˆ—ã§ã€Œã©ã®å¼•æ•°ãŒ closure / deps ã‹ã€ã‚’æŒ‡å®šï¼‰ğŸ‘‡([Biome][4])

```jsonc
{
  "linter": {
    "rules": {
      "correctness": {
        "useExhaustiveDependencies": {
          "options": {
            "hooks": [
              { "name": "useLocation", "closureIndex": 0, "dependenciesIndex": 1 },
              { "name": "useQuery", "closureIndex": 2, "dependenciesIndex": 0 }
            ]
          }
        }
      }
    }
  }
}
```

ã€Œã†ã¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ãƒƒã‚¯ã«ã‚‚ã¡ã‚ƒã‚“ã¨ãƒã‚§ãƒƒã‚¯åŠ¹ã‹ã›ãŸã„ï¼ã€ã£ã¦ã¨ãè¶…ä¾¿åˆ©ğŸ¥°ğŸ§ 

---

## 7) overridesï¼šãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ â€œã‚†ã‚‹ãâ€ ã—ãŸã„ï¼ˆã‚ã‚‹ã‚ã‚‹ï¼‰ğŸ§ªğŸ¡

![react study 265 overrides](./picture/react_study_265_overrides.png)

ãƒ†ã‚¹ãƒˆã£ã¦ `console.log` ã§ãƒ‡ãƒãƒƒã‚°ã—ãŸããªã£ãŸã‚Šã€`any` çš„ãªå¦¥å”ãŒå‡ºãŸã‚Šâ€¦ã‚ã‚‹ã‚ˆã­ğŸ˜‚
ãã‚“ãªã¨ãã¯ **`overrides`** ãŒæœ€å¼·ï¼
**ä¸Šã«æ›¸ã„ãŸåŸºæœ¬è¨­å®šã‚’ã€ç‰¹å®šãƒ‘ã‚¹ã ã‘ä¸Šæ›¸ã**ã§ãã‚‹ã‚ˆã€‚ã•ã‚‰ã« **é †ç•ªãŒè¶…å¤§äº‹ã§ã€æœ€åˆã«ãƒãƒƒãƒã—ãŸã‚‚ã®ã ã‘ãŒä½¿ã‚ã‚Œã‚‹**ã‚ˆğŸ§·([Biome][1])

ä¾‹ï¼š`**/*.test.tsx` ã¨ `**/*.spec.tsx` ã ã‘ `noConsole` ã‚’ OFF ã«ã™ã‚‹ğŸ‘‡

```jsonc
{
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noConsole": "error"
      }
    }
  },
  "overrides": [
    {
      "includes": ["**/*.test.ts", "**/*.test.tsx", "**/*.spec.ts", "**/*.spec.tsx"],
      "linter": {
        "rules": {
          "suspicious": {
            "noConsole": "off"
          }
        }
      }
    }
  ]
}
```

---

## 8) â€œã“ã®1è¡Œã ã‘é»™ã£ã¦ã¦ï¼â€ï¼ˆæœ€çµ‚æ‰‹æ®µï¼‰ğŸ¤«ğŸ©¹

ã€Œåˆ†ã‹ã£ã¦ã‚‹ã‘ã©ä»Šå›ã¯æ„å›³çš„ï¼ã€ã£ã¦æ™‚ã¯ã€æŠ‘åˆ¶ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆsuppressionï¼‰ã‚‚ä½¿ãˆã‚‹ã‚ˆã€‚
`useExhaustiveDependencies` ã®ä¾‹ã ã¨ã€ã“ã‚“ãª `biome-ignore` ãŒã‚ã‚‹ã‚ˆã­ğŸ‘‡([Biome][4])

```ts
// biome-ignore lint/correctness/useExhaustiveDependencies(a): suppress dependency a
useEffect(() => {
  console.log(a);
}, []);
```

âš ï¸ ãŸã ã—ã€ä¾å­˜é…åˆ—ã®æŠ‘åˆ¶ã¯ãƒã‚°ã‚Šã‚„ã™ã„ã‹ã‚‰ã€Œã‚³ãƒ¼ãƒ‰ã§ç›´ã›ã‚‹ãªã‚‰ç›´ã™ã€ãŒåŸºæœ¬ã ã‚ˆã€œğŸ˜–ğŸ’¦([Biome][4])

---

## 9) ãƒ«ãƒ¼ãƒ«ã®æ¢ã—æ–¹ï¼šå›°ã£ãŸã‚‰ `biome explain` ğŸ§ ğŸ”

![react study 265 explain](./picture/react_study_265_explain.png)

ã€Œã“ã®ãƒ«ãƒ¼ãƒ«ä½•ï¼Ÿã€ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼·ã•ã¯ï¼Ÿã€ã£ã¦ãªã£ãŸã‚‰ã€CLI ã® `biome explain` ãŒä¾¿åˆ©ï¼
Biome ã®è¨­å®šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ `explain` ã‚³ãƒãƒ³ãƒ‰ãŒæ¡ˆå†…ã•ã‚Œã¦ã‚‹ã‚ˆğŸ§¾âœ¨([Biome][1])

```bash
biome explain noDebugger
```

---

## 10) ãƒŸãƒ‹æ¼”ç¿’ï¼ˆ10ã€œ15åˆ†ï¼‰â±ï¸ğŸ€

### æ¼”ç¿’Aï¼šconsole ãƒ«ãƒ¼ãƒ«ã‚’å…¥ã‚Œã¦ã¿ã‚ˆã†ğŸ§¯

1. `noConsole` ã‚’ error ã§æœ‰åŠ¹åŒ–ï¼ˆ`console.log` ãŒæ€’ã‚‰ã‚Œã‚‹ï¼‰
2. options ã§ `error/warn/info` ã ã‘è¨±å¯ã—ã¦ã¿ã‚‹ï¼ˆ`console.error` ã¯OKï¼‰

ï¼ˆè¨­å®šã®å½¢ã¯ã“ã®ç« ã®ä¾‹ãã®ã¾ã¾ã§OKğŸ™†â€â™€ï¸ï¼‰([Biome][2])

### æ¼”ç¿’Bï¼šãƒ†ã‚¹ãƒˆã ã‘ console OK ã«ã—ã‚ˆã†ğŸ§ª

* `overrides` ã§ `**/*.test.tsx` ã ã‘ `noConsole: off` ã«ã—ã¦ã¿ã‚‹
  ï¼ˆã€Œæœ€åˆã«ãƒãƒƒãƒã—ãŸ overrides ã ã‘ãŒä½¿ã‚ã‚Œã‚‹ã€ã‚‚æ„è­˜ï¼ï¼‰([Biome][1])

### æ¼”ç¿’Cï¼š`biome lint` ã‚’ â€œä¸€éƒ¨ã ã‘â€ èµ°ã‚‰ã›ã¦å‹•ä½œç¢ºèªã—ã‚ˆã†ğŸƒâ€â™€ï¸

CLI ã«ã¯ `lint` ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã£ã¦ã€å¯¾è±¡ã‚’çµã‚Œã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ã‚ã‚‹ã‚ˆï¼ˆ`--only` ãªã©ï¼‰([Biome][5])
â€»ç´°ã‹ã„ä½¿ã„æ–¹ã¯æ¬¡ç« ä»¥é™ã§ã•ã‚‰ã«æ´»èºã™ã‚‹ã‚ˆã€œï¼

---

## ã¾ã¨ã‚ğŸ‰âœ¨

* ã¾ãšã¯ **recommended ã‚’è»¸**ã«ã—ã¦ã€å¿…è¦ãªãƒ«ãƒ¼ãƒ«ã ã‘è¶³ã™ã®ãŒãƒ©ã‚¯ğŸ§ 
* **ãƒ«ãƒ¼ãƒ«å˜ä½“**ã¯ `group: { ruleName: "warn" }` ã¿ãŸã„ã«æ›¸ãğŸ§©([Biome][3])
* **overrides** ã§ã€Œãƒ†ã‚¹ãƒˆã ã‘ã€ã€Œç‰¹å®šãƒ•ã‚©ãƒ«ãƒ€ã ã‘ã€ã‚†ã‚‹ãã§ãã‚‹ï¼ˆé †ç•ªå¤§äº‹ï¼ï¼‰ğŸ§·([Biome][1])
* å›°ã£ãŸã‚‰ **`biome explain`** ã§èª¿ã¹ã‚‹ğŸ”([Biome][5])

æ¬¡ã® **ç¬¬266ç« ï¼ˆCI/CD ã¸ã®çµ„ã¿è¾¼ã¿ï¼‰**ã§ã¯ã€ã“ã®ãƒ«ãƒ¼ãƒ«ãŸã¡ã‚’ GitHub Actions ãªã©ã§è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã—ã¦ã€Œé€šã‚‰ãªã„ã¨ãƒãƒ¼ã‚¸ã§ããªã„ã€ã¿ãŸã„ã«ã—ã¦ã„ãã‚ˆã€œğŸ’ªğŸ˜º

[1]: https://biomejs.dev/reference/configuration/ "Configuration | Biome"
[2]: https://biomejs.dev/linter/rules/no-console/ "noConsole | Biome"
[3]: https://biomejs.dev/linter/rules/no-unused-function-parameters/ "noUnusedFunctionParameters | Biome"
[4]: https://biomejs.dev/linter/rules/use-exhaustive-dependencies/ "useExhaustiveDependencies | Biome"
[5]: https://biomejs.dev/reference/cli/ "CLI | Biome"
