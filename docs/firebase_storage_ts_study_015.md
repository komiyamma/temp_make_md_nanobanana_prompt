ã¾ãšã¯æœ¬æ—¥æ™‚ç‚¹ï¼ˆ2026-02-18ï¼‰ã§ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¸ã¾ãˆã¦ã€**Storage Rules ã‚’ã€Œã„ã£ãŸã‚“å…¨éƒ¨é–‰ã‚ã‚‹â†’å¿…è¦ãªåˆ†ã ã‘é–‹ã‘ã‚‹ã€**æµã‚Œã§ã€ç¬¬15ç« ã‚’â€œæ‰‹ã‚’å‹•ã‹ã—ã¦è…¹è½ã¡â€ã™ã‚‹å½¢ã«ã—ã¾ã™ğŸ›¡ï¸ğŸšªï¼ˆRulesã®ç½ ï¼**ã‚†ã‚‹ã„ãƒ«ãƒ¼ãƒ«ãŒ1ã¤ã§ã‚‚å½“ãŸã‚‹ã¨é€šã‚‹**ã‚‚å…ˆã«æ½°ã—ã¾ã™ğŸ”¥ï¼‰([Firebase][1])

---

### ç¬¬15ç« ï¼šStorage Ruleså…¥é–€ï¼ˆã¾ãšâ€œé–‰ã˜ã‚‹â€ãŒæ­£ç¾©ï¼‰ğŸšªğŸ›¡ï¸

#### ã“ã®ç« ã®ã‚´ãƒ¼ãƒ«ğŸ¯

* ã€Œ**èª°ã§ã‚‚æ›¸ã‘ã‚‹äº‹æ•…**ã€ã‚’ç¢ºå®Ÿã«é˜²ãğŸ§¯
* `users/{uid}/profile/**` ã‚’ **æœ¬äººã ã‘**ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ğŸ”
* èª­ã¿å–ã‚Šã‚’ **æœ¬äººã®ã¿**ã«ã™ã‚‹ã‹ **å…¬é–‹**ã«ã™ã‚‹ã‹ã€æ–¹é‡ã‚’æ±ºã‚ã¦ãƒ«ãƒ¼ãƒ«ã«è½ã¨ã™ğŸ¤”âœ¨
* å¤‰æ›´ã—ãŸRulesã‚’ **Playground or ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼**ã§â€œé€šã‚‹/å¼¾ã‹ã‚Œã‚‹â€ã‚’ç¢ºèªã§ãã‚‹ğŸ‘€âœ… ([Firebase][2])

---

## 1) Rulesã£ã¦ä½•è€…ï¼Ÿã–ã£ãã‚Šç†è§£ğŸ§ âœ¨

### âœ… Rulesã¯ã€Œå…¥å£ã®é–€ç•ªã€ğŸš§ğŸ§‘â€âœˆï¸

Cloud Storage for Firebase ã®Rulesã¯ã€**ã©ã®ãƒ‘ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã€èª°ãŒã€ä½•ã‚’ã—ã¦ã„ã„ã‹**ã‚’æ±ºã‚ã‚‹â€œé–€ç•ªâ€ã§ã™ğŸ›¡ï¸
ã—ã‹ã‚‚ **ã‚¢ãƒ—ãƒªã®ä¸­ã˜ã‚ƒãªãã€ã‚µãƒ¼ãƒãƒ¼å´ã§å¼·åˆ¶**ã•ã‚Œã¾ã™ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚ºãƒ«ã—ã¦ã‚‚æ­¢ã¾ã‚‹ï¼‰ğŸ’ª([Firebase][1])

### âœ… ãƒ«ãƒ¼ãƒ«ã¯ AND ã˜ã‚ƒãªãã¦ OR ã«ãªã‚Šã‚„ã™ã„âš ï¸

è¶…é‡è¦ãƒã‚¤ãƒ³ãƒˆğŸ‘‡
**åŒã˜ãƒ‘ã‚¹ã«è¤‡æ•°ãƒ«ãƒ¼ãƒ«ãŒå½“ãŸã£ãŸã¨ãã€ã©ã‚Œã‹1ã¤ã§ã‚‚è¨±å¯ã™ã‚‹ã¨é€šã‚‹**ï¼ˆORã£ã½ã„æŒ™å‹•ï¼‰ã§ã™ã€‚
ã ã‹ã‚‰ã€Œåºƒãè¨±å¯ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã€ã‚’ç½®ãã¨ã€å¾Œã‹ã‚‰ç´°ã‹ã„ç¦æ­¢ã‚’æ›¸ã„ã¦ã‚‚æ­¢ã‚ã‚‰ã‚Œãªã„â€¦ãŒèµ·ãã¾ã™ğŸ˜‡ğŸ”¥([Firebase][1])

â†’ ãªã®ã§ã“ã®ç« ã¯ **â€œã¾ãšå…¨éƒ¨é–‰ã˜ã‚‹â€**ã‹ã‚‰å…¥ã‚Šã¾ã™ğŸšªğŸ’¥

### âœ… Storageã¯ã€Œãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚‹ã‚ˆã†ã«è¦‹ãˆã¦ã€å®Ÿä½“ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã€ğŸ“ï¼ˆåœ°å‘³ã«å¤§äº‹ï¼‰

`users/uid/profile/xxx.png` ã¿ãŸã„ã« `/` ã§åŒºåˆ‡ã£ã¦ã‚‚ã€Storageçš„ã«ã¯ **æ–‡å­—åˆ—ã®åå‰**ã§ã™ã€‚
ã ã‹ã‚‰ Rules ã‚‚ã€Œã“ã®æ–‡å­—åˆ—ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å½“ãŸã‚‹ã‹ï¼Ÿã€ã§åˆ¤å®šã—ã¾ã™ğŸ§©([Firebase][3])

---

## 2) ã¾ãšçŸ¥ã‚‹ã¹ã3ã¤ã®å¤‰æ•°ï¼ˆã“ã‚Œã ã‘ã§æˆ¦ãˆã‚‹ï¼‰ğŸ¥‹âœ¨

### `request.auth`ï¼šãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚‹ï¼Ÿèª°ï¼ŸğŸ”

* ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ â†’ `request.auth` ãŒå…¥ã‚‹
* æœªãƒ­ã‚°ã‚¤ãƒ³ â†’ `request.auth == null`
* ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯ `request.auth.uid` ğŸªª([Firebase][4])

### `match`ï¼šã©ã®ãƒ‘ã‚¹ã®è©±ï¼ŸğŸ§­

Rulesã¯ **ãƒ‘ã‚¹ã«ãƒãƒƒãƒã—ãŸãƒ–ãƒ­ãƒƒã‚¯**ã® `allow` ã‚’è¦‹ã¾ã™ã€‚

### `allow`ï¼šä½•ã‚’è¨±å¯ï¼Ÿï¼ˆread/write ã ã‘ã˜ã‚ƒãªã„ï¼‰ğŸ“Œ

Cloud Storage ã®Rulesã¯ `read` / `write` ã‚’ã‚ˆãä½¿ã„ã¾ã™ãŒã€å®Ÿã¯ `get` / `list` / `create` / `update` / `delete` ã¿ãŸã„ã«åˆ†ã‘ã¦æ›¸ã‘ã¾ã™âœï¸

* `read` ã¯ `get` ã¨ `list` ã‚’å«ã‚€
* `write` ã¯ `create/update/delete` ã‚’å«ã‚€
  ã¿ãŸã„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ğŸ§ ([Firebase][5])

---

## 3) æ‰‹ã‚’å‹•ã‹ã™â‘ ï¼šRulesã‚’é–‹ãğŸ‘€ğŸ§°

### Consoleã§ç¢ºèªã™ã‚‹æ‰‹é †ï¼ˆæœ€çŸ­ï¼‰ğŸ–±ï¸

Firebase Console â†’ **Storage** â†’ **Rules** ã‚’é–‹ãğŸ“Œ([Firebase][2])

> Console ã¨ CLI ã®ä¸¡æ–¹ã§ç·¨é›†ã§ãã‚‹ã‘ã©ã€æ··ãœã‚‹ã¨ã€Œä¸Šæ›¸ãäº‹æ•…ã€ãŒèµ·ããŒã¡ãªã®ã§ã€ã¾ãšã¯ã“ã®ç« ã¯ Console ã§çµ±ä¸€ãŒå®‰å…¨ã§ã™ğŸ§¯
> ï¼ˆConsoleã«ã¯â€œç›´è¿‘ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸRulesâ€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰([Firebase][2])

---

## 4) æ‰‹ã‚’å‹•ã‹ã™â‘¡ï¼šã„ã£ãŸã‚“ã€Œå…¨é–‰ã˜ã€ãƒ«ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹ğŸšªğŸ”’

ã¾ãšã¯ã“ã‚ŒğŸ‘‡
ï¼ˆ**ã“ã‚Œã‚’Publishã™ã‚‹ã¨ã€ä»Šã¾ã§å‹•ã„ã¦ãŸã‚¢ãƒƒãƒ—/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå…¨éƒ¨æ­¢ã¾ã‚Šã¾ã™**ã€‚æ­¢ã¾ã‚‹ã®ãŒæ­£ã—ã„ğŸ‘ï¼‰

```txt
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // ã¾ãšå…¨éƒ¨æ‹’å¦ï¼ˆæœ€å¼·ã®å®‰å…¨ã‚¹ã‚¿ãƒ¼ãƒˆï¼‰
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
```

### ãªã‚“ã§æœ€åˆã«é–‰ã‚ã‚‹ã®ï¼ŸğŸ¤”

* â€œã†ã£ã‹ã‚Šå…¬é–‹â€ãŒä¸€ç•ªãƒ¤ãƒã„ğŸ’¥
* å¾Œã‹ã‚‰è¶³ã™ã®ã¯ç°¡å˜ã€å¾Œã‹ã‚‰æ¼ã‚Œã‚’æ¢ã™ã®ã¯åœ°ç„ğŸ˜‡
* ORæŒ™å‹•ã®ã›ã„ã§ã€ã‚†ã‚‹ã„ãƒ«ãƒ¼ãƒ«ãŒæ··ã–ã‚‹ã¨ç©´ãŒç©ºãã‚„ã™ã„ğŸ•³ï¸([Firebase][1])

---

## 5) æ‰‹ã‚’å‹•ã‹ã™â‘¢ï¼šãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒãƒ‘ã‚¹ã ã‘ã€æœ¬äººã«é–‹ã‘ã‚‹ğŸ”ğŸ“·

ã“ã“ã‹ã‚‰ãŒæœ¬ç•ªâœ¨
ã‚ãªãŸã®è¨­è¨ˆã¯ `users/{uid}/profile/**` ãªã®ã§ã€ãã“ã ã‘è¨±å¯ã—ã¾ã™ğŸ“

### ãƒ‘ã‚¿ãƒ¼ãƒ³Aï¼šèª­ã¿å–ã‚Šã‚‚ã€Œæœ¬äººã ã‘ã€ğŸ«¥ï¼ˆã¾ãšã¯å®‰å…¨å¯„ã‚Šï¼‰

```txt
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {

    // ãƒ‡ãƒ•ã‚©ã¯å…¨éƒ¨æ‹’å¦ï¼ˆä¿é™ºï¼‰
    match /{allPaths=**} {
      allow read, write: if false;
    }

    // æœ¬äººã ã‘ read/write OK
    match /users/{uid}/profile/{fileId} {
      allow read, write: if request.auth != null
                         && request.auth.uid == uid;
    }
  }
}
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³Bï¼šèª­ã¿å–ã‚Šã¯ã€Œå…¬é–‹ã€ã§ã‚‚OKï¼ˆãŸã ã— list ã¯é–‰ã‚ã‚‹ã®ãŒç„¡é›£ï¼‰ğŸŒğŸ•µï¸â€â™‚ï¸

ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã£ã¦ã€Œä»–äººã«è¦‹ã›ã‚‹å‰æã€ã®ã“ã¨ã‚‚å¤šã„ã®ã§ã€ãã®å ´åˆã¯ã“ã†ğŸ‘‡
**ãƒã‚¤ãƒ³ãƒˆï¼š`get` ã ã‘å…¬é–‹ã€`list` ã¯æ‹’å¦**ï¼ˆä¸€è¦§ã§å…¨éƒ¨æŠœã‹ã‚Œã‚‹ã®ã‚’é¿ã‘ã‚‹ï¼‰ğŸ§¯([Firebase][5])

```txt
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {

    match /{allPaths=**} {
      allow read, write: if false;
    }

    match /users/{uid}/profile/{fileId} {
      // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚„å‰Šé™¤ãªã©ã¯æœ¬äººã ã‘
      allow write: if request.auth != null
                   && request.auth.uid == uid;

      // ç”»åƒã®ã€Œå–å¾—ã ã‘ã€å…¬é–‹ï¼ˆURLã‚’çŸ¥ã£ã¦ã„ã‚‹äººã ã‘è¦‹ã‚‰ã‚Œã‚‹é‹ç”¨ã«å¯„ã›ã‚‹ï¼‰
      allow get: if true;

      // ãƒ•ã‚©ãƒ«ãƒ€ä¸€è¦§ã¯å…¬é–‹ã—ãªã„ï¼ˆç·å½“ãŸã‚Šé˜²æ­¢ï¼‰
      allow list: if false;
    }
  }
}
```

---

## 6) æ‰‹ã‚’å‹•ã‹ã™â‘£ï¼šRules Playground ã§å³ãƒ†ã‚¹ãƒˆğŸ§ªâš¡

Consoleç·¨é›†ãªã‚‰ã€ã¾ãšã¯ Playground ã§ã€Œé€šã‚‹/å¼¾ã‹ã‚Œã‚‹ã€ã‚’ç¢ºèªã§ãã¾ã™ğŸ‘€
ï¼ˆãŸã ã—æœ¬ç•ªå‰ã¯ Emulator Suite ã®ã»ã†ãŒã‚¬ãƒã§å®‰å¿ƒï¼‰([Firebase][2])

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¾‹ï¼ˆã“ã®ç« ã¯ã“ã‚Œã ã‘ã‚„ã‚Œã°OKï¼‰âœ…

1. **æœªãƒ­ã‚°ã‚¤ãƒ³**ã§ `users/someone/profile/x` ã« `write` â†’ **æ‹’å¦ã•ã‚Œã‚‹**ğŸ™…â€â™€ï¸
2. **ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆuid=AAAï¼‰**ã§ `users/AAA/profile/x` ã« `write` â†’ **è¨±å¯ã•ã‚Œã‚‹**ğŸ™†â€â™‚ï¸
3. **ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆuid=BBBï¼‰**ã§ `users/AAA/profile/x` ã« `write` â†’ **æ‹’å¦ã•ã‚Œã‚‹**ğŸ§¨

---

## 7) Publishã—ãŸã‚‰ã€Œåæ˜ ã«å°‘ã—æ™‚é–“ã€â³ï¼ˆç„¦ã‚‰ãªã„ï¼‰

Rulesã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã‹ã‚‰ã€åæ˜ ã¾ã§**æ•°åˆ†ã‹ã‹ã‚‹**ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ã€Œã•ã£ãå¤‰ãˆãŸã®ã«æŒ™å‹•å¤‰ã‚ã‚‰ã‚“ï¼ã€ã£ã¦æ™‚ã¯ã€ã¾ãšæ·±å‘¼å¸ğŸ˜®â€ğŸ’¨â˜•([Firebase][6])

---

## 8) AIã§Rulesä½œã‚Šã‚’çˆ†é€Ÿã«ã™ã‚‹ğŸ¤–ğŸš€ï¼ˆãŸã ã—â€œæœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯äººé–“â€ï¼‰

### âœ… Gemini CLI / Antigravity ã§ â€œä¸‹æ›¸ãâ†’ç©´ãƒã‚§ãƒƒã‚¯â€ãŒå¼·ã„ğŸ’ª

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ã€**Gemini CLI ãªã©ã®AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ Security Rules ã®ç”Ÿæˆã‚’æ”¯æ´ã§ãã‚‹**ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚([Firebase][1])

ã•ã‚‰ã«ã€**Firebase MCP server** ã‚’ä½¿ã†ã¨ã€AIãƒ„ãƒ¼ãƒ«ãŒFirebaseã‚’ç›´æ¥æ‰±ã†â€œé“å…·ç®±â€ãŒå¢—ãˆã¾ã™ğŸ§°

* Antigravity / Gemini CLI ãªã©ã«å¯¾å¿œ
* Firestore/Storage/Rulesã®ç†è§£ã«ã‚‚ä½¿ãˆã‚‹ï¼ˆå…¬å¼ã«è¨˜è¼‰ã‚ã‚Šï¼‰([Firebase][7])

#### MCPã¾ã‚ã‚Šï¼ˆæœ€ä½é™ã®æŠŠæ¡ï¼‰ğŸ§©

* Firebase MCP server ã¯ Antigravity / Gemini CLI ãªã©ã§ä½¿ãˆã‚‹ã‚ˆã€ã¨å…¬å¼ãŒæ›¸ã„ã¦ã¾ã™ã€‚([Firebase][7])
* Gemini CLI å´ã¯å…¬å¼ã®æ‹¡å¼µã‚’å…¥ã‚Œã‚‹ã®ãŒæ¨å¥¨ã€ã¨ã„ã†èª¬æ˜ã‚‚ã‚ã‚Šã¾ã™ã€‚([Firebase][7])

### âœ… Gemini in Firebase ã¯ã€Œç›¸è«‡å½¹ã€ğŸ§¯

Gemini in Firebase ã¯ **Rulesã®è³ªå•ã«ã¯ç­”ãˆã‚‰ã‚Œã‚‹**ã‘ã©ã€**ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã®ã§Rulesç”Ÿæˆã¯ã§ããªã„**ã€ã¨ã„ã†æ³¨æ„ãŒå…¬å¼ã«ã‚ã‚Šã¾ã™ã€‚
ç”Ÿæˆã—ãŸã„ãªã‚‰ Gemini CLI ã¿ãŸã„ã«ã‚³ãƒ¼ãƒ‰ã«è§¦ã‚Œã‚‹AIãŒå‘ã„ã¦ã¾ã™ã€‚([Firebase][8])

### ä½¿ãˆã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹ï¼ˆã‚³ãƒ”ãƒšOKï¼‰ğŸ“‹âœ¨

* ã€ŒCloud Storage for Firebase ã® Security Rules ã‚’æ›¸ã„ã¦ã€‚
  ä»•æ§˜ï¼š`users/{uid}/profile/{fileId}` ã¯ **æœ¬äººã ã‘ write**ã€read ã¯ **(æœ¬äººã®ã¿ or getã ã‘å…¬é–‹ï¼‹listç¦æ­¢)** ã®2æ¡ˆã‚’å‡ºã—ã¦ã€‚
  ã•ã‚‰ã«ã€ãƒ«ãƒ¼ãƒ«ãŒé‡ãªã£ã¦ç©´ãŒç©ºã‹ãªã„ã‚ˆã†ã« **â€œã¾ãšå…¨æ‹’å¦â†’ä¾‹å¤–ã§è¨±å¯â€** å½¢å¼ã«ã—ã¦ã€‚
  æœ€å¾Œã« Playground ç”¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚‚3ã¤ä½œã£ã¦ã€‚ã€

---

## 9) Firebase AI Logic ã¨çµ¡ã‚ã‚‹ã¨ã€Rulesã¯ã•ã‚‰ã«é‡è¦ğŸ§ ğŸ¤–

ç”»åƒã‚’ã‚¢ãƒƒãƒ—ã—ã¦ã€ã‚ã¨ã§ **Geminiã«ç”»åƒèª¬æ˜ï¼ˆaltï¼‰ã‚„ã‚¿ã‚°ä»˜ã‘**ã‚’ã•ã›ã‚‹æµã‚Œï¼ˆç¬¬20ç« å¯„ã‚Šï¼‰ã‚’ã‚„ã‚‹ã¨ã€Storageä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’AIå‡¦ç†ã«æ¸¡ã™å ´é¢ãŒå‡ºã¾ã™ã€‚
ãã®ã¨ãã‚‚ **Security Rules ãŒé©åˆ‡ã«è¨±å¯/æ‹’å¦**ã§ãã¦ãªã„ã¨å±é™ºã§ã™âš ï¸
å…¬å¼ã®AI Logicã‚¬ã‚¤ãƒ‰ã§ã‚‚ã€Œpublic rulesã¯ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å‘ã‘ã§ã€æœ¬ç•ªã¯ robust rules æ¨å¥¨ã€ã¨æ³¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚([Firebase][9])

---

## ãƒŸãƒ‹èª²é¡ŒğŸ§©ğŸ“

æ¬¡ã®ã©ã£ã¡ã«ã™ã‚‹ã‹æ±ºã‚ã¦ã€Rulesã‚’æ›¸ã„ã¦ã€Playgroundã§3ã‚±ãƒ¼ã‚¹ç¢ºèªã—ã¦ã­âœ…

1. **æœ¬äººã ã‘è¦‹ãˆã‚‹**ï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é‡è¦–ğŸ«¥ï¼‰
2. **getã ã‘å…¬é–‹ï¼‹listç¦æ­¢**ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã£ã½ã„ğŸŒï¼‰

æå‡ºï¼ˆè‡ªåˆ†ç”¨ãƒ¡ãƒ¢ã§OKï¼‰âœï¸

* é¸ã‚“ã æ–¹é‡ï¼ˆ1 or 2ï¼‰
* ãªãœãã‚Œã«ã—ãŸã‹ï¼ˆ1è¡Œã§OKï¼‰
* Playgroundã®çµæœï¼ˆé€šã£ãŸ/å¼¾ã‹ã‚ŒãŸï¼‰3ã¤

---

## ãƒã‚§ãƒƒã‚¯âœ…ğŸ‰ï¼ˆã“ã“ã¾ã§ã§ããŸã‚‰å‹ã¡ï¼‰

* [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¨æ‹’å¦ã«ãªã£ã¦ã‚‹ğŸšªğŸ”’
* [ ] `users/{uid}/profile/{fileId}` ã«ã ã‘ä¾‹å¤–è¨±å¯ã‚’ä½œã£ãŸğŸ”“
* [ ] åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ›¸ãè¾¼ã¿ãŒæ‹’å¦ã•ã‚Œã‚‹ğŸ§¨
* [ ] æœªãƒ­ã‚°ã‚¤ãƒ³ãŒæ‹’å¦ã•ã‚Œã‚‹ğŸ™…â€â™€ï¸
* [ ] readæ–¹é‡ï¼ˆæœ¬äººã®ã¿ / getå…¬é–‹ï¼‹listç¦æ­¢ï¼‰ã‚’æ±ºã‚ãŸğŸ¤”
* [ ] ORæŒ™å‹•ã®ç½ ï¼ˆã‚†ã‚‹ã„ãƒ«ãƒ¼ãƒ«ãŒæ··ã–ã‚‹ã¨é€šã‚‹ï¼‰ã‚’æ„è­˜ã§ããŸğŸ§ ([Firebase][1])

---

## ã‚ˆãã‚ã‚‹è©°ã¾ã‚ŠğŸ˜µâ€ğŸ’«ğŸ§¯ï¼ˆç§’ã§æ½°ã™ï¼‰

### âŒ 403 / Permission denied

* `uid` ã®å¤‰æ•°åãŒã‚ºãƒ¬ã¦ã‚‹ï¼ˆ`{uid}` ã¨ `request.auth.uid` ã®æ¯”è¼ƒãŒæˆç«‹ã—ã¦ãªã„ï¼‰
* ãƒ‘ã‚¹ãŒè¨­è¨ˆã¨é•ã†ï¼ˆ`profile/` ã®éšå±¤ãŒ1å€‹é•ã†ã¨ã‹ï¼‰
* ã©ã“ã‹ã« **ã‚†ã‚‹ã„ allow** ãŒæ®‹ã£ã¦ã‚‹ï¼ˆORç½ ï¼‰([Firebase][1])

### âŒ Storageã‚’æœ‰åŠ¹åŒ–ã§ããªã„ / æ–™é‡‘ã¾ã‚ã‚Šã§æ­¢ã¾ã‚‹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒã‚±ãƒƒãƒˆé–¢é€£ã§ **2026-02-03 ã¾ã§ã« Blaze ã¸**ç­‰ã®è¦ä»¶ãŒå½“ãŸã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¡ä»¶ã«ã‚ˆã‚‹ï¼‰ã€‚([Firebase][10])

---

æ¬¡ã¯ **ç¬¬16ç« ï¼ˆç”»åƒã ã‘ï¼†ã‚µã‚¤ã‚ºä¸Šé™ã‚’Rulesã§å¼·åˆ¶ï¼‰**ã§ã€`request.resource.contentType` / `request.resource.size` ã‚’å…¥ã‚Œã¦ã€Œå¤‰ãªãƒ•ã‚¡ã‚¤ãƒ«å®Œå…¨æ’é™¤ã€ã¾ã§è¡Œã“ã†ğŸ§¯ğŸ–¼ï¸
ï¼ˆStorage Rulesã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã§ãã‚‹ã®ã‚‚å…¬å¼ã«æ˜è¨˜ã‚ã‚Šã ã‚ˆï¼‰([Firebase][4])

[1]: https://firebase.google.com/docs/rules "Firebase Security Rules"
[2]: https://firebase.google.com/docs/storage/security/get-started "Get started with Firebase Security Rules Â |Â  Cloud Storage for Firebase"
[3]: https://firebase.google.com/docs/storage/security/core-syntax "Learn the core syntax of the Firebase Security Rules for Cloud Storage language Â |Â  Cloud Storage for Firebase"
[4]: https://firebase.google.com/docs/storage/security?hl=ja "Cloud Storage ç”¨ã® Firebase ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ ãƒ«ãƒ¼ãƒ«ã‚’ç†è§£ã™ã‚‹ Â |Â  Cloud Storage for Firebase"
[5]: https://firebase.google.com/docs/rules/rules-behavior "How Security Rules work Â |Â  Firebase Security Rules"
[6]: https://firebase.google.com/docs/rules/manage-deploy "Manage and deploy Firebase Security Rules"
[7]: https://firebase.google.com/docs/ai-assistance/mcp-server "Firebase MCP server Â |Â  Develop with AI assistance"
[8]: https://firebase.google.com/docs/ai-assistance/gemini-in-firebase "Gemini in Firebase"
[9]: https://firebase.google.com/docs/ai-logic/solutions/cloud-storage "Include large files in multimodal requests and manage files using Cloud Storage for Firebase Â |Â  Firebase AI Logic"
[10]: https://firebase.google.com/docs/storage/faqs-storage-changes-announced-sept-2024 "FAQs about changes to Cloud Storage for Firebase pricing and default buckets"
