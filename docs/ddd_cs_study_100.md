# ç¬¬100ç« ï¼šç·æ‹¬ ğŸ‰ ä»Šæ—¥ã‹ã‚‰ã§ãã‚‹ã€Œ1ã¤ã ã‘ã®å°ã•ãªè¨­è¨ˆã€âœ¨

![å°ã•ãªè¨­è¨ˆ](./picture/ddd_cs_study_100_small_design.png)

ã“ã“ã¾ã§æ¥ãŸã‚ãªãŸã¯ã‚‚ã†ã€ã€Œã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãäººã€ã‹ã‚‰ã€Œè¿·ã‚ãšä½œã‚Œã‚‹äººã€ã¸ã®å…¥å£ã«ç«‹ã£ã¦ã¾ã™ğŸšªğŸŒ¸
ã“ã®æœ€çµ‚ç« ã¯ã€â€œDDDã‚’å®Œç’§ã«ã‚„ã‚‹â€ã˜ã‚ƒãªãã¦ã€**ä»Šæ—¥ã‹ã‚‰ä¸€ç”Ÿä½¿ãˆã‚‹ã€Œæœ€å°ã®è¨­è¨ˆãƒ«ãƒ¼ãƒ—ã€**ã‚’èº«ä½“ã«å…¥ã‚Œã‚‹å›ã ã‚ˆğŸ’ªğŸ’•

---

## ã“ã®ç« ã®ã‚´ãƒ¼ãƒ« ğŸ¯

![Design Loop](./picture/ddd_cs_study_100_design_loop.png)

**ãŸã£ãŸ1ã¤ã®æ©Ÿèƒ½**ã‚’é¡Œæã«ã—ã¦ã€æ¬¡ã®æµã‚Œã‚’1å‘¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ï¼

1. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’1è¡Œã«ã™ã‚‹ğŸ“
2. ãƒ«ãƒ¼ãƒ«ã‚’3è¡Œã«ã™ã‚‹ğŸ“Œ
3. å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’1å€‹ä½œã‚‹ğŸ’
4. é›†ç´„ã‚’1å€‹ä½œã‚‹ğŸ‘‘
5. ãƒ†ã‚¹ãƒˆã‚’1æœ¬æ›¸ãğŸ§ª
6. å¤–å´ï¼ˆAPIï¼‰ã‚’1å€‹ã ã‘ç¹‹ãğŸŒ
7. AIã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã›ã¦ã€Œè¿·ã„ã€ã‚’å‰Šã‚‹ğŸ¤–âœ¨

ã“ã‚ŒãŒã§ãã‚‹ã¨ã€**AIã«ã‚³ãƒ¼ãƒ‰ã‚’ä½œã‚‰ã›ã¦ã‚‚â€œå£Šã‚Œãªã„è»¸â€**ãŒæ®‹ã‚Šã¾ã™ğŸ‘

---

## ä»Šæ—¥ã‚„ã‚‹é¡Œæï¼šãƒã‚¤ãƒ³ãƒˆåˆ©ç”¨ï¼ˆæœ€å°DDDã‚µãƒ³ãƒ—ãƒ«ï¼‰ğŸ«âœ¨

ã€Œä¼šå“¡ãŒãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ã†ã€ã£ã¦åœ°å‘³ã ã‘ã©ã€**ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹**ã‹ã‚‰DDDã®ç·´ç¿’ã«ã¡ã‚‡ã†ã©ã„ã„ã®ğŸ®

### ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆ1è¡Œï¼‰ğŸ“

ã€Œä¼šå“¡ã¯ã€æŒã£ã¦ã‚‹ãƒã‚¤ãƒ³ãƒˆä»¥å†…ã§ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ãˆã‚‹ã€

### ãƒ«ãƒ¼ãƒ«ï¼ˆ3è¡Œï¼‰ğŸ“Œ

![Point Rules](./picture/ddd_cs_study_100_point_rules.png)

* ä½¿ã†ãƒã‚¤ãƒ³ãƒˆã¯ **1ä»¥ä¸Š**
* æ®‹é«˜ãŒè¶³ã‚Šãªã„ã¨ **å¤±æ•—**
* æˆåŠŸã—ãŸã‚‰ã€Œãƒã‚¤ãƒ³ãƒˆãŒä½¿ã‚ã‚ŒãŸã€ã‚¤ãƒ™ãƒ³ãƒˆãŒèµ·ããŸã“ã¨ã«ã™ã‚‹ğŸ“£

ã“ã®3è¡ŒãŒâ€œè¨­è¨ˆã®èŠ¯â€ã ã‚ˆğŸ§ âœ¨

---

## æœ€å°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆã“ã‚Œã ã‘ã§OKï¼‰ğŸ“¦

![Minimal Structure](./picture/ddd_cs_study_100_minimal_structure.png)

* **Domain**ï¼šãƒ«ãƒ¼ãƒ«ã®ä¸­å¿ƒï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ»é›†ç´„ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
* **Application**ï¼šãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œï¼ˆã‚³ãƒãƒ³ãƒ‰ï¼‰
* **Infrastructure**ï¼šä¿å­˜ï¼ˆä»Šå›ã¯ãƒ¡ãƒ¢ãƒªã§OKï¼‰
* **Web**ï¼šAPIï¼ˆæœ€å°ï¼‰

ã€Œå¤§ããä½œã‚‹ã€ã‚ˆã‚Šã€ã€Œ**åˆ†ã‘ã‚‹ç·´ç¿’**ã€ãŒç›®çš„ã­ğŸ˜Š

---

## 1) Domainï¼šå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆPoints / MemberIdï¼‰ğŸ’

![Value Object Gem](./picture/ddd_cs_study_100_value_object_gem.png)

> ã“ã“ãŒæœ€é‡è¦ğŸ’–
> `int` ã‚„ `Guid` ã‚’ãã®ã¾ã¾æ’’ã‹ãªã„ã§ã€ã€Œæ„å‘³ã®ã‚ã‚‹å‹ã€ã«ã™ã‚‹ã ã‘ã§è¿·ã„ãŒæ¿€æ¸›ã™ã‚‹ã‚ˆâœ¨

```csharp
// Domain/Shared/Result.cs
namespace PointSample.Domain.Shared;

public sealed record Error(string Message);

public sealed class Result
{
    public bool IsSuccess { get; }
    public Error? Error { get; }

    protected Result(bool isSuccess, Error? error)
        => (IsSuccess, Error) = (isSuccess, error);

    public static Result Ok() => new(true, null);
    public static Result Fail(string message) => new(false, new Error(message));
}

public sealed class Result<T> : Result
{
    public T? Value { get; }

    private Result(bool isSuccess, T? value, Error? error) : base(isSuccess, error)
        => Value = value;

    public static Result<T> Ok(T value) => new(true, value, null);
    public static new Result<T> Fail(string message) => new(false, default, new Error(message));
}
```

```csharp
// Domain/Members/MemberId.cs
namespace PointSample.Domain.Members;

public readonly record struct MemberId(Guid Value)
{
    public static MemberId New() => new(Guid.NewGuid());
    public override string ToString() => Value.ToString();
}
```

```csharp
// Domain/Points/Points.cs
using PointSample.Domain.Shared;

namespace PointSample.Domain.Points;

public readonly record struct Points
{
    public int Value { get; }

    private Points(int value) => Value = value;

    public static Result<Points> Create(int value)
        => value < 0
            ? Result<Points>.Fail("ãƒã‚¤ãƒ³ãƒˆã¯0ä»¥ä¸Šã«ã—ã¦ã­ğŸ¥º")
            : Result<Points>.Ok(new Points(value));

    public static Result<Points> Positive(int value)
        => value <= 0
            ? Result<Points>.Fail("ãƒã‚¤ãƒ³ãƒˆã¯1ä»¥ä¸Šã«ã—ã¦ã­ğŸ¥º")
            : Result<Points>.Ok(new Points(value));

    public static Points Zero => new(0);

    public static Points operator +(Points a, Points b) => new(a.Value + b.Value);

    public static Result<Points> Subtract(Points a, Points b)
        => (a.Value - b.Value) < 0
            ? Result<Points>.Fail("æ®‹é«˜ä¸è¶³ã ã‚ˆğŸ¥º")
            : Result<Points>.Ok(new Points(a.Value - b.Value));
}
```

---

## 2) Domainï¼šé›†ç´„ï¼ˆPointAccountï¼‰ğŸ‘‘

![Aggregate Guard](./picture/ddd_cs_study_100_aggregate_guard.png)

ã€Œãƒã‚¤ãƒ³ãƒˆå£åº§ã€ã¯é–¢é€£ãƒ«ãƒ¼ãƒ«ã‚’ã¾ã¨ã‚ã‚‹â€œãƒãƒ¼ãƒ â€ã ã‚ˆğŸ€âœ¨
**å¤–ã‹ã‚‰æ®‹é«˜ã‚’ç›´æ¥ã„ã˜ã‚‰ã›ãªã„**ã®ãŒã‚³ãƒ„ï¼

```csharp
// Domain/Points/Events/PointsUsed.cs
using PointSample.Domain.Members;

namespace PointSample.Domain.Points.Events;

public interface IDomainEvent;

public sealed record PointsUsed(MemberId MemberId, int Amount, DateTimeOffset OccurredAt) : IDomainEvent;
```

```csharp
// Domain/Points/PointAccount.cs
using PointSample.Domain.Members;
using PointSample.Domain.Points.Events;
using PointSample.Domain.Shared;

namespace PointSample.Domain.Points;

public sealed class PointAccount
{
    private readonly List<IDomainEvent> _events = new();

    public MemberId MemberId { get; }
    public Points Balance { get; private set; }

    public IReadOnlyList<IDomainEvent> Events => _events;

    private PointAccount(MemberId memberId, Points balance)
        => (MemberId, Balance) = (memberId, balance);

    public static PointAccount Create(MemberId memberId)
        => new(memberId, Points.Zero);

    public void Earn(Points points)
        => Balance = Balance + points;

    public Result Use(Points points)
    {
        // ãƒ«ãƒ¼ãƒ«ï¼šå¼•ã‘ãªã„ãªã‚‰å¤±æ•—
        var next = Points.Subtract(Balance, points);
        if (!next.IsSuccess) return Result.Fail(next.Error!.Message);

        Balance = next.Value!.Value; // Points
        _events.Add(new PointsUsed(MemberId, points.Value, DateTimeOffset.UtcNow));
        return Result.Ok();
    }

    public void ClearEvents() => _events.Clear();
}
```

---

## 3) Applicationï¼šãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆUsePointsï¼‰ğŸ¯

â€œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤â€ã¯ **æ‰‹é †ä¿‚**ã€‚
ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã€Œä½¿ã†ãƒ«ãƒ¼ãƒ«ã€ã‚’æŠ¼ã—ä»˜ã‘ãªã„ã§ã€**å‘¼ã³å‡ºã™ã ã‘**ã«ã™ã‚‹ã®ãŒæ°—æŒã¡ã„ã„âœ¨

```csharp
// Application/UsePoints/UsePointsCommand.cs
namespace PointSample.Application.UsePoints;

public sealed record UsePointsCommand(Guid MemberId, int Amount);
```

```csharp
// Application/UsePoints/UsePointsHandler.cs
using PointSample.Domain.Members;
using PointSample.Domain.Points;
using PointSample.Domain.Points.Events;
using PointSample.Domain.Shared;

namespace PointSample.Application.UsePoints;

public interface IPointAccountRepository
{
    Task<PointAccount?> Find(MemberId memberId, CancellationToken ct);
    Task Save(PointAccount account, CancellationToken ct);
}

public interface IDomainEventPublisher
{
    Task Publish(IEnumerable<IDomainEvent> events, CancellationToken ct);
}

public sealed class UsePointsHandler
{
    private readonly IPointAccountRepository _repo;
    private readonly IDomainEventPublisher _publisher;

    public UsePointsHandler(IPointAccountRepository repo, IDomainEventPublisher publisher)
        => (_repo, _publisher) = (repo, publisher);

    public async Task<Result> Handle(UsePointsCommand cmd, CancellationToken ct)
    {
        var memberId = new MemberId(cmd.MemberId);

        var account = await _repo.Find(memberId, ct);
        if (account is null) return Result.Fail("ä¼šå“¡ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚ˆğŸ¥º");

        var amount = Points.Positive(cmd.Amount);
        if (!amount.IsSuccess) return Result.Fail(amount.Error!.Message);

        var used = account.Use(amount.Value!.Value);
        if (!used.IsSuccess) return used;

        await _repo.Save(account, ct);
        await _publisher.Publish(account.Events, ct);
        account.ClearEvents();

        return Result.Ok();
    }
}
```

---

## 4) Infrastructureï¼šã¾ãšã¯ãƒ¡ãƒ¢ãƒªä¿å­˜ã§OK ğŸ§Š

DBã¯ã‚ã¨ã§ã„ã„ã‚ˆã€œï¼ä»Šæ—¥ã¯è¨­è¨ˆã®èŠ¯ãŒç›®çš„ã ã‹ã‚‰ã­ğŸ˜Š

```csharp
// Infrastructure/InMemoryPointAccountRepository.cs
using System.Collections.Concurrent;
using PointSample.Application.UsePoints;
using PointSample.Domain.Members;
using PointSample.Domain.Points;

namespace PointSample.Infrastructure;

public sealed class InMemoryPointAccountRepository : IPointAccountRepository
{
    private readonly ConcurrentDictionary<Guid, PointAccount> _store = new();

    public Task<PointAccount?> Find(MemberId memberId, CancellationToken ct)
        => Task.FromResult(_store.TryGetValue(memberId.Value, out var a) ? a : null);

    public Task Save(PointAccount account, CancellationToken ct)
    {
        _store[account.MemberId.Value] = account;
        return Task.CompletedTask;
    }

    // ãƒ‡ãƒ¢ç”¨ï¼šå£åº§ã‚’äº‹å‰ã«ä½œã‚‹
    public PointAccount Seed(MemberId memberId, int balance)
    {
        var acc = PointAccount.Create(memberId);
        var p = Points.Create(balance).Value!.Value;
        acc.Earn(p);
        _store[memberId.Value] = acc;
        return acc;
    }
}

public sealed class NoopDomainEventPublisher : IDomainEventPublisher
{
    public Task Publish(IEnumerable<PointSample.Domain.Points.Events.IDomainEvent> events, CancellationToken ct)
        => Task.CompletedTask;
}
```

---

## 5) Webï¼šAPIã‚’1å€‹ã ã‘ç¹‹ã ğŸŒâœ¨

ã€Œå¤–å´ã€ã¯è–„ãï¼è–„ãï¼ãŒæ­£ç¾©ğŸª½

```csharp
// Web/Program.cs
using PointSample.Application.UsePoints;
using PointSample.Infrastructure;

var builder = WebApplication.CreateBuilder(args);

builder.Services.AddSingleton<InMemoryPointAccountRepository>();
builder.Services.AddSingleton<IPointAccountRepository>(sp => sp.GetRequiredService<InMemoryPointAccountRepository>());
builder.Services.AddSingleton<IDomainEventPublisher, NoopDomainEventPublisher>();
builder.Services.AddScoped<UsePointsHandler>();

var app = builder.Build();

// ãƒ‡ãƒ¢ç”¨ï¼šèµ·å‹•æ™‚ã«ä¼šå“¡ã‚’1äººä½œã‚‹ï¼ˆãƒ­ã‚°ã«IDå‡ºã™ï¼‰
app.Lifetime.ApplicationStarted.Register(() =>
{
    var repo = app.Services.GetRequiredService<InMemoryPointAccountRepository>();
    var memberId = PointSample.Domain.Members.MemberId.New();
    repo.Seed(memberId, balance: 100);

    app.Logger.LogInformation("Demo MemberId: {MemberId}", memberId.Value);
});

app.MapPost("/members/{memberId:guid}/points/use",
    async (Guid memberId, UsePointsRequest body, UsePointsHandler handler, CancellationToken ct) =>
    {
        var result = await handler.Handle(new UsePointsCommand(memberId, body.Amount), ct);
        return result.IsSuccess
            ? Results.Ok(new { message = "OKâœ¨ ãƒã‚¤ãƒ³ãƒˆä½¿ãˆãŸã‚ˆï¼" })
            : Results.BadRequest(new { message = result.Error!.Message });
    });

app.Run();

public sealed record UsePointsRequest(int Amount);
```

---

## 6) ãƒ†ã‚¹ãƒˆã‚’1æœ¬ã ã‘æ›¸ã ğŸ§ªğŸ’–ï¼ˆã“ã‚ŒãŒâ€œè¿·ã‚ãªã„ä¿é™ºâ€ï¼‰

![Test Insurance](./picture/ddd_cs_study_100_test_insurance.png)

ã€Œæ®‹é«˜ä¸è¶³ãªã‚‰å¤±æ•—ã€ã ã‘ã§ã‚‚OKï¼

```csharp
// Tests/PointAccountTests.cs
using PointSample.Domain.Members;
using PointSample.Domain.Points;
using Xunit;

public class PointAccountTests
{
    [Fact]
    public void Use_should_fail_when_insufficient_balance()
    {
        var memberId = MemberId.New();
        var acc = PointAccount.Create(memberId);

        acc.Earn(Points.Create(10).Value!.Value);

        var result = acc.Use(Points.Positive(20).Value!.Value);

        Assert.False(result.IsSuccess);
    }
}
```

---

## 7) AIã‚’ã€Œè¨­è¨ˆã®å£æ‰“ã¡ã€ã«ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ ğŸ§ ğŸ¤–âœ¨

![AI Sparring](./picture/ddd_cs_study_100_ai_sparring.png)

AIã¯â€œé€Ÿã„â€ã‘ã©ã€â€œå¢ƒç•Œç·šâ€ã¯äººé–“ãŒæ¡ã‚‹ã®ãŒã‚³ãƒ„ğŸ’¡
Copilotã¯ã€é–‹ã„ã¦ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚„é¸æŠç¯„å›²ãªã©ã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã—ã¦ææ¡ˆã—ã¦ãã‚Œã‚‹ã‹ã‚‰ã€**é–¢ä¿‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã‹ã‚‰èã**ã®ãŒåŠ¹ãã‚ˆğŸ“‚âœ¨ ([GitHub][1])
Visual Studioã§ã‚‚Copilot Chatã¯çµ±åˆã•ã‚Œã¦ã¦ã€ææ¡ˆã‚’å·®åˆ†è¡¨ç¤ºã§å–ã‚Šè¾¼ã‚ã‚‹æµã‚ŒãŒç”¨æ„ã•ã‚Œã¦ã‚‹ã‚ˆğŸª„ ([Microsoft Learn][2])

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹â‘ ï¼šãƒ«ãƒ¼ãƒ«ãŒå‹ã«é–‰ã˜ã¦ã‚‹ã‹ãƒã‚§ãƒƒã‚¯âœ…

* ã€Œã‚ãªãŸã¯DDDã®å³ã—ã‚ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚`PointAccount` ã®ä¸å¤‰æ¡ä»¶ï¼ˆãƒ«ãƒ¼ãƒ«ï¼‰ãŒç ´ã‚‰ã‚Œã‚‹çµŒè·¯ãŒãªã„ã‹ã€æŠœã‘é“ã‚’æ¢ã—ã¦æŒ‡æ‘˜ã—ã¦ã€‚ä¿®æ­£æ¡ˆã‚‚ãã ã•ã„ã€‚ã€

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹â‘¡ï¼šå¢ƒç•Œç·šãƒã‚§ãƒƒã‚¯ğŸ§±

* ã€ŒDomainå±¤ã«â€œå¤–éƒ¨éƒ½åˆï¼ˆDB/HTTP/JSONï¼‰â€ãŒæ··ã–ã£ã¦ãªã„ã‹ç¢ºèªã—ã¦ã€‚æ··ã–ã£ã¦ãŸã‚‰ã©ã“ã«é€ƒãŒã™ã¹ãï¼Ÿã€

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹â‘¢ï¼šãƒ†ã‚¹ãƒˆè¿½åŠ ğŸ§ª

* ã€Œã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§è¿½åŠ ã™ã¹ããƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’3ã¤æŒ™ã’ã¦ã€xUnitã§æ›¸ã„ã¦ã€

> ã¡ãªã¿ã«Copilotã«ã¯ã€Œææ¡ˆãŒå…¬é–‹ã‚³ãƒ¼ãƒ‰ã«ä¸€è‡´ã™ã‚‹å¯èƒ½æ€§ã€ã‚’é€šçŸ¥ã™ã‚‹ä»•çµ„ã¿ã‚‚å…¥ã£ã¦ã‚‹ã®ã§ã€å–ã‚Šè¾¼ã¿åˆ¤æ–­ãŒã—ã‚„ã™ã„ã‚ˆğŸ” ([Microsoft Learn][2])

---

## ğŸ¬ ã¡ã‚‡ã„æœ€æ–°ã®â€œå¬‰ã—ã„ã‚„ã¤â€ãƒ¡ãƒ¢ï¼ˆC# 14ï¼‰

C# 14ã¯ .NET 10 ã¨ä¸€ç·’ã«æ¥ã¦ã¦ã€`extension` ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆæ‹¡å¼µãƒ¡ãƒ³ãƒãƒ¼ï¼‰ã‚„ `field` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãªã©ãŒå…¥ã£ã¦ã‚‹ã‚ˆâœ¨ ([Microsoft for Developers][3])
ãŸã ï¼ä»Šæ—¥ã¯ç„¡ç†ã«ä½¿ã‚ãªãã¦OKğŸ™†â€â™€ï¸ ã€Œè¨­è¨ˆã®èŠ¯ã€ï¼ãƒ«ãƒ¼ãƒ«ã‚’å‹ã«é–‰ã˜è¾¼ã‚ã‚‹ã€ã®æ–¹ãŒ100å€å¤§äº‹ğŸ’–

---

## ã‚ã‚ŠãŒã¡äº‹æ•… ğŸ§¯ğŸ¥ºï¼ˆã“ã“ã ã‘é¿ã‘ã‚Œã°å‹ã¡ï¼ï¼‰

* âŒ ã„ããªã‚Šâ€œå®Œç’§ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£â€ã‚’ä½œã‚ã†ã¨ã™ã‚‹
  â†’ âœ… **æ©Ÿèƒ½1å€‹**ã§å›ã™ã®ãŒå…ˆï¼
* âŒ ãªã‚“ã§ã‚‚Repositoryã‚’ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åŒ–ã—ã¦æŠ½è±¡åŒ–ã—ã™ãã‚‹
  â†’ âœ… æœ€åˆã¯ `IPointAccountRepository` ã¿ãŸã„ã«**ç”¨é€”ç›´çƒ**ã§OKï¼
* âŒ ãƒ«ãƒ¼ãƒ«ãŒDTOã‚„Controllerã«æ•£ã‚‰ã°ã‚‹
  â†’ âœ… ãƒ«ãƒ¼ãƒ«ã¯Domainã¸ğŸ’ï¼ˆã“ã“ãŒè¿·ã„ã‚’æ¶ˆã™ï¼‰

---

## ä»Šæ—¥ã‹ã‚‰ã®ã€Œä¸€ç”Ÿãƒ¢ãƒç¿’æ…£ã€ğŸŒ±âœ¨ï¼ˆè¶…çŸ­ã„ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰
 
 è¿·ã£ãŸã‚‰ã“ã®é †ã«æˆ»ã£ã¦ã­ğŸ”
 
 ```mermaid
 flowchart LR
     One[1. One Line<br/>UseCase] --> Three[2. Three Lines<br/>Rules]
     Three --> Model[3. Minimal<br/>Model]
     Model --> Test[4. Test<br/>First]
     Test --> API[5. Thin<br/>API]
     API --> Review[6. AI<br/>Review]
     Review --> One
     
     style One fill:#ffdfba,stroke:#f80
     style Test fill:#caffbf,stroke:#383
 ```
 
 1. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1è¡ŒğŸ“
 2. ãƒ«ãƒ¼ãƒ«3è¡ŒğŸ“Œ
 3. åè©2ã¤ï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå€™è£œï¼‰ğŸ§¸
 4. å‹•è©2ã¤ï¼ˆé›†ç´„ãƒ¡ã‚½ãƒƒãƒ‰å€™è£œï¼‰ğŸƒâ€â™€ï¸
 5. ãƒ†ã‚¹ãƒˆ1æœ¬ğŸ§ª
 6. å¤–å´ã‚’è–„ãç¹‹ãğŸŒ
 7. AIãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã€ŒæŠœã‘é“ã€ã‚’æ½°ã™ğŸ¤–ğŸ”¨
 
 ---
 
 ## VS Codeæ´¾ã®äººã¸ï¼ˆãŠã¾ã‘ï¼‰ğŸ

ã‚‚ã—VS Codeã‚’ã‚ˆãä½¿ã†ãªã‚‰ã€Codexã‚’ãƒ‘ãƒãƒ«ã¨ã—ã¦ä½¿ã£ãŸã‚Šã€ã‚¯ãƒ©ã‚¦ãƒ‰ã«å¤§ãã‚ä½œæ¥­ã‚’æŠ•ã’ã‚‹å°ç·šã‚‚ç”¨æ„ã•ã‚Œã¦ã‚‹ã‚ˆğŸ§ âœ¨ ([Visual Studio Marketplace][4])

---

## æœ€å¾Œã«ï¼šã‚ãªãŸã®ã€Œæœ€åˆã®ä¸€æ­©ã€ğŸ‘£ğŸ’–

ä»Šæ—¥ã‚„ã‚‹ã®ã¯ã€ãŸã£ãŸã“ã‚Œã ã‘ã§OKğŸ‘‡

âœ… **ã‚ãªãŸã®ä½œã‚ŠãŸã„ã‚¢ãƒ—ãƒªã®æ©Ÿèƒ½ã‚’1å€‹ã ã‘é¸ã¶**
âœ… ã“ã®ç« ã®ã€Œ1è¡Œâ†’3è¡Œâ†’VOâ†’é›†ç´„â†’ãƒ†ã‚¹ãƒˆâ†’APIã€ã‚’ãã®ã¾ã¾å½“ã¦ã¯ã‚ã‚‹
âœ… AIã«â€œæŠœã‘é“ãƒ¬ãƒ“ãƒ¥ãƒ¼â€ã•ã›ã¦ä¿®æ­£ã™ã‚‹

ã“ã‚Œã‚’ç¹°ã‚Šè¿”ã™ã¨ã€è¨­è¨ˆãŒã€ŒçŸ¥è­˜ã€ã˜ã‚ƒãªãã¦ã€Œæ‰‹ç™–ã€ã«ãªã‚‹ã‚ˆğŸ˜Šâœ¨

---

æœ€è¿‘ã®AIé–‹ç™ºç’°å¢ƒã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŒ–ãƒ»çµ±åˆãŒã©ã‚“ã©ã‚“é€²ã‚“ã§ã‚‹ã‹ã‚‰ã€å®šæœŸçš„ã«è¿½ã„ã‹ã‘ã‚‹ã¨æ¥½ã—ã„ã‚ˆğŸš€ ([Visual Studio][5])

* [The Verge](https://www.theverge.com/news/808032/github-ai-agent-hq-coding-openai-anthropic?utm_source=chatgpt.com)
* [TechRadar](https://www.techradar.com/pro/openai-launches-gpt-5-codex-with-a-74-5-percent-success-rate-on-real-world-coding?utm_source=chatgpt.com)
* [The Verge](https://www.theverge.com/news/753984/microsoft-copilot-gpt-5-model-update?utm_source=chatgpt.com)

[1]: https://github.com/features/copilot "GitHub Copilot Â· Your AI pair programmer Â· GitHub"
[2]: https://learn.microsoft.com/en-us/visualstudio/ide/visual-studio-github-copilot-chat?view=visualstudio "About GitHub Copilot Chat in Visual Studio - Visual Studio (Windows) | Microsoft Learn"
[3]: https://devblogs.microsoft.com/dotnet/introducing-csharp-14/ "Introducing C# 14 - .NET Blog"
[4]: https://marketplace.visualstudio.com/items?itemName=openai.chatgpt "
        Codex â€“ OpenAIâ€™s coding agent - Visual Studio Marketplace
    "
[5]: https://visualstudio.microsoft.com/insiders/ "
	Visual Studio 2026 Insiders - Faster, smarter IDE"
