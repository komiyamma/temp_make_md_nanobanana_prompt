# ç¬¬198ç« ï¼šç·´ç¿’ï¼šã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒã‚’æœ€é©åŒ–ã™ã‚‹ğŸ–¼ï¸

ã“ã®ç« ã¯ã€Œãƒ–ãƒ­ã‚°è¨˜äº‹ã®å…ˆé ­ã«ã‚ã‚‹ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒï¼ˆãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒï¼‰ã€ã‚’ã€**é€Ÿããƒ»å´©ã‚Œãšãƒ»ã‚­ãƒ¬ã‚¤**ã«ã™ã‚‹ç·´ç¿’ã ã‚ˆã€œğŸ˜Šâœ¨  
å®Œæˆã—ãŸã‚‰ã€ãƒšãƒ¼ã‚¸ã®ä½“æ„Ÿé€Ÿåº¦ãŒã‚°ãƒƒã¨ä¸ŠãŒã‚‹ã“ã¨ãŒå¤šã„ï¼ğŸš€

---

## ğŸ¯ ã“ã®ç« ã®ã‚´ãƒ¼ãƒ«ï¼ˆã§ããŸã‚‰å‹ã¡ï¼ï¼‰ğŸ

- ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã‚’ `next/image` ã§è¡¨ç¤ºã§ãã‚‹ğŸ“¸
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒã‚¬ã‚¯ãƒƒã¨å‹•ã‹ãªã„ï¼ˆCLSå¯¾ç­–ï¼‰**ãŒã§ãã‚‹ğŸ§±
- **ã‚¹ãƒãƒ›/PCã§ç„¡é§„ã«ãƒ‡ã‚«ã„ç”»åƒã‚’å–ã‚‰ãªã„**ã‚ˆã†ã« `sizes` ã‚’ä»˜ã‘ã‚‰ã‚Œã‚‹ğŸ“±ğŸ’»
- ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒãŒãƒšãƒ¼ã‚¸ã®ä¸»å½¹ãªã‚‰ `priority` ã§å…ˆèª­ã¿ã§ãã‚‹âš¡

> Next.js ã® `<Image>` ã¯ã€é©åˆ‡ãªã‚µã‚¤ã‚ºé…ä¿¡ãƒ»ãƒ¢ãƒ€ãƒ³å½¢å¼ï¼ˆWebPãªã©ï¼‰ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®‰å®šãªã©ã‚’åŠ©ã‘ã¦ãã‚Œã‚‹ã‚ˆã€œğŸ’¡  
> ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰:contentReference[oaicite:0]{index=0}

---

## ğŸ§  ã¾ãšã¯å…¨ä½“åƒï¼ˆç”»åƒãŒé€Ÿããªã‚‹æµã‚Œï¼‰âœ¨

![Eyecatch Optimization](./picture/next_study_198_eyecatch_opt.png)

```mermaid
flowchart TD
  A["å…ƒç”»åƒï¼ˆæ’®å½±/ç”Ÿæˆï¼‰"] --> B["ãƒˆãƒªãƒŸãƒ³ã‚°ï¼†ãƒªã‚µã‚¤ã‚º"]
  B --> C["åœ§ç¸®ã—ã¦è»½é‡åŒ–ï¼ˆWebå‘ã‘ï¼‰"]
  C --> D["Next.jsã«é…ç½®ï¼ˆimport or publicï¼‰"]
  D --> E["next/imageã§è¡¨ç¤º"]
  E --> F["ãƒ–ãƒ©ã‚¦ã‚¶ãŒsrcset/sizesã§æœ€é©ã‚µã‚¤ã‚ºã‚’é¸ã¶"]
  F --> G["LCPæ”¹å–„ï¼†CLSæ¸›å°‘ã§ä½“æ„ŸãŒé€Ÿã„âœ¨"]
```

---

## âœ… ã‚¹ãƒ†ãƒƒãƒ—0ï¼šã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒã®ã€Œæ­£è§£ã®å½¢ã€ã‚’ä½œã‚‹ğŸ§

ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¯ã ã„ãŸã„ã€Œæ¨ªé•·ã€ãŒå¤šã„ã‚ˆã­ğŸ“·âœ¨  
ãŠã™ã™ã‚ã¯ã“ã®ã¸ã‚“ğŸ‘‡ï¼ˆè¿·ã£ãŸã‚‰ã‚³ãƒ¬ã§OKï¼ï¼‰

- ğŸ“ **æ¯”ç‡**ï¼š16:9ï¼ˆä¾‹ï¼š1600Ã—900ï¼‰ã‹ 1200Ã—630ï¼ˆOGPã£ã½ã„æ¯”ç‡ï¼‰

![198 ideal ratio](./picture/next_study_198_ideal_ratio.png)
- ğŸ“¦ **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç›®æ¨™**ï¼šã¾ãšã¯ **200KBå‰å¾Œ**ã‚’ç›®æ¨™ã«ï¼ˆå†™çœŸãªã‚‰ç‰¹ã«ï¼ï¼‰
- ğŸ§¼ **ã‚„ã‚Šã™ãæ³¨æ„**ï¼šæ¥µç«¯ã«åœ§ç¸®ã™ã‚‹ã¨æ–‡å­—ã‚„è¼ªéƒ­ãŒãƒ¢ãƒ¤ã‚‹ğŸ˜µâ€ğŸ’«

> Next.js å´ã§ã‚‚æœ€é©åŒ–ã¯ã—ã¦ãã‚Œã‚‹ã‘ã©ã€å…ƒãŒ8MBã¨ã‹ã ã¨ã€ŒåŠ å·¥ã‚³ã‚¹ãƒˆã€ã‚‚ä¸ŠãŒã‚ŠãŒã¡ãªã®ã§ã€å…ƒç”»åƒã‚‚è»½ãã—ã¦ãŠãã¨å®‰å®šã ã‚ˆğŸ™†â€â™€ï¸

---

## âœ… ã‚¹ãƒ†ãƒƒãƒ—1ï¼šç”»åƒã®ç½®ãå ´æ‰€ã‚’æ±ºã‚ã‚‹ï¼ˆãŠã™ã™ã‚ã¯2æŠï¼‰ğŸ—‚ï¸

![198 static vs public](./picture/next_study_198_static_vs_public.png)

### Aæ¡ˆï¼š**é™çš„import**ï¼ˆã„ã¡ã°ã‚“æ¥½ï¼†ãã‚Œã„âœ¨ï¼‰
- `placeholder="blur"` ãŒä½¿ã„ã‚„ã™ã„ï¼ˆè‡ªå‹•ã§ã¼ã‹ã—ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãŒå…¥ã‚Šã‚„ã™ã„ï¼‰ğŸ«§  
- `width/height` ã‚‚è‡ªå‹•ã§å–ã‚Œã‚‹ã“ã¨ãŒå¤šã„ğŸ“

> é™çš„importã ã¨ `width/height` ã‚„ `blurDataURL` ãŒè‡ªå‹•ã§å…¥ã‚‹ä¾‹ãŒå…¬å¼ã«ã‚ã‚‹ã‚ˆ:contentReference[oaicite:1]{index=1}

### Bæ¡ˆï¼š`public/` é…ä¸‹ï¼ˆå˜ç´”ã§åˆ†ã‹ã‚Šã‚„ã™ã„ï¼‰
- `src="/images/cover.jpg"` ã¿ãŸã„ã«æ›¸ã‘ã‚‹ğŸ§
- ãŸã ã— `placeholder="blur"` ã¯è‡ªåˆ†ã§ç”¨æ„ã™ã‚‹å¿…è¦ãŒå‡ºã‚„ã™ã„ï¼ˆãªãã¦ã‚‚OKï¼ï¼‰

ä»Šå›ã¯ç·´ç¿’ãªã®ã§ã€**Aæ¡ˆï¼ˆé™çš„importï¼‰**ã§ã„ãã­ğŸ˜Šâœ¨

---

## âœ… ã‚¹ãƒ†ãƒƒãƒ—2ï¼šã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹ğŸ§©ğŸ–¼ï¸

### ğŸ“ ä¾‹ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
- `app/components/Eyecatch.tsx`
- `app/assets/eyecatch.jpg`ï¼ˆã“ã“ã«ç½®ãæƒ³å®šï¼‰

### 1) `app/components/Eyecatch.tsx` ã‚’ä½œæˆâœï¸

![198 eyecatch component](./picture/next_study_198_eyecatch_component.png)

````tsx
import Image, { type StaticImageData } from "next/image";

type Props = {
  src: StaticImageData;
  alt: string;
  priority?: boolean;
};

export function Eyecatch({ src, alt, priority = false }: Props) {
  return (
    <figure
      style={{
        position: "relative",
        width: "100%",
        aspectRatio: "16 / 9",
        overflow: "hidden",
        borderRadius: 16,
        margin: 0,
      }}
    >
      <Image
        src={src}
        alt={alt}
        fill
        placeholder="blur"
        priority={priority}
        sizes="(max-width: 768px) 100vw, 900px"
        style={{ objectFit: "cover" }}
      />
    </figure>
  );
}
`````

ã“ã“ãŒè¶…å¤§äº‹ãƒã‚¤ãƒ³ãƒˆã ã‚ˆã€œï¼ğŸ”‘âœ¨

* `fill`ï¼šè¦ªè¦ç´ ã„ã£ã±ã„ã«åºƒã’ã‚‹ğŸ§ƒï¼ˆè¦ªãŒ `position: relative` å¿…é ˆï¼‰([Next.js][1])
* `aspectRatio: "16 / 9"`ï¼š**é«˜ã•ãŒç¢ºä¿ã•ã‚Œã‚‹** â†’ ç”»åƒèª­ã¿è¾¼ã¿ã§ã‚¬ã‚¯ãƒƒã¨å‹•ãã«ãã„ğŸ§±
* `sizes`ï¼šã“ã‚ŒãŒã‚ã‚‹ã¨**ç«¯æœ«ã«åˆã‚ã›ã¦é©åˆ‡ãªã‚µã‚¤ã‚ºã‚’å–ã‚Šã‚„ã™ã„**ğŸ“±ğŸ’»ï¼ˆç„¡ã„ã¨ 100vw æƒ³å®šã§ãƒ‡ã‚«ã‚ã‚’å–ã‚ŠãŒã¡ï¼‰([Next.js][1])
* `priority`ï¼šã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒãŒ **LCPä¸»å½¹**ãªã‚‰ `true` ã«ã™ã‚‹âš¡ï¼ˆä½¿ã„ã™ãæ³¨æ„ï¼ï¼‰([Next.js][1])

---

## âœ… ã‚¹ãƒ†ãƒƒãƒ—3ï¼šè¨˜äº‹ãƒšãƒ¼ã‚¸ã§ä½¿ã†ğŸ“°âœ¨

ä¾‹ã¨ã—ã¦ `app/posts/sample/page.tsx` ã¿ãŸã„ãªãƒšãƒ¼ã‚¸ã§ä½¿ã†ã­ï¼

```tsx
import cover from "@/app/assets/eyecatch.jpg";
import { Eyecatch } from "@/app/components/Eyecatch";

export default function Page() {
  return (
    <main style={{ maxWidth: 900, margin: "24px auto", padding: "0 16px" }}>
      <Eyecatch src={cover} alt="ã‚µãƒ³ãƒ—ãƒ«è¨˜äº‹ã®ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒ" priority />

      <h1 style={{ marginTop: 20 }}>ã‚µãƒ³ãƒ—ãƒ«è¨˜äº‹ğŸŒ¸</h1>
      <p>ã“ã“ã«æœ¬æ–‡ãŒå…¥ã‚‹ã‚ˆã€œğŸ˜Š</p>
    </main>
  );
}
```

---

## âœ… ã‚¹ãƒ†ãƒƒãƒ—4ï¼šæœ€é©åŒ–ã§ãã¦ã‚‹ã‹ç¢ºèªã™ã‚‹ğŸ‘€ğŸ”ï¼ˆã‹ã‚“ãŸã‚“ï¼‰

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ğŸ‘‡

```bash
npm run dev
```

ãã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦â€¦

### ğŸ” ã‹ã‚“ãŸã‚“ãƒã‚§ãƒƒã‚¯3ç‚¹ã‚»ãƒƒãƒˆ

![198 check points](./picture/next_study_198_check_points.png)

1. ğŸ§± **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã‚‚ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒè·³ã­ãªã„ï¼Ÿ**ï¼ˆCLSã£ã½ã„å‹•ããŒãªã„ï¼‰
2. ğŸ“± ã‚¹ãƒãƒ›å¹…ã«ã—ãŸæ™‚ã€**ç”»åƒãŒå¿…è¦ä»¥ä¸Šã«é‡ããªã„ï¼Ÿ**
3. ğŸ§° DevTools â†’ Network ã§ç”»åƒã‚’è¦‹ã‚‹ã¨ã€`/_next/image?...` ã¿ãŸã„ãªæœ€é©åŒ–é…ä¿¡ã£ã½ã„æŒ™å‹•ãŒè¦‹ãˆã‚‹ã“ã¨ãŒå¤šã„ã‚ˆï¼ˆç’°å¢ƒã«ã‚ˆã‚‹ï¼‰âœ¨

---

## ğŸ”¥ è¿½åŠ ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ˆã¡ã‚‡ã„ç™ºå±•ï¼‰ğŸ®âœ¨

### ãƒŸãƒƒã‚·ãƒ§ãƒ³Aï¼š`sizes` ã‚’è‡ªåˆ†ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«åˆã‚ã›ã¦èª¿æ•´ğŸ’…

ä»Šã¯ã“ã†ã—ã¦ã‚‹ğŸ‘‡

* ã‚¹ãƒãƒ›ï¼š`100vw`ï¼ˆç”»é¢å¹…ã„ã£ã±ã„ï¼‰
* PCï¼š`900px` ã¾ã§

ã‚‚ã—PCã§ã€Œå·¦å³ã«ä½™ç™½ãŒã‚‚ã£ã¨åºƒã„ã€ãªã‚‰ã€`900px` ã‚’ `720px` ã«ã—ã¦ã¿ã¦ã­ğŸ˜Š
**å°ã•ãã§ãã‚‹ã»ã©è»½ããªã‚‹**ã“ã¨ãŒå¤šã„ã‚ˆâš¡

> `sizes` ã¯ `fill` ã‚„ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–CSSã®ã¨ãç‰¹ã«é‡è¦ã ã‚ˆ([Next.js][1])

---

### ãƒŸãƒƒã‚·ãƒ§ãƒ³Bï¼šå¤–éƒ¨URLç”»åƒã‚’ä½¿ã†å ´åˆã®è¨­å®šï¼ˆã‚„ã‚‹äººã ã‘ï¼‰ğŸŒğŸ§©

![198 remote patterns](./picture/next_study_198_remote_patterns.png)

ã‚‚ã— `src="https://...."` ã‚’ä½¿ã†ãªã‚‰ã€è¨±å¯ãƒªã‚¹ãƒˆãŒå¿…è¦ã ã‚ˆã€œğŸ›¡ï¸
`next.config.ts` ã« `remotePatterns` ã‚’è¿½åŠ ã™ã‚‹æ„Ÿã˜ï¼

```ts
import type { NextConfig } from "next";

const config: NextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "example.com",
        port: "",
        pathname: "/images/**",
        search: "",
      },
    ],
  },
};

export default config;
```

> å…¬å¼ã®æ¡ˆå†…ï¼šãƒªãƒ¢ãƒ¼ãƒˆç”»åƒã¯ `remotePatterns` ã‚’è¨­å®šã—ã¦å®‰å…¨ã«ä½¿ã†([Next.js][2])

---

## ğŸ§¯ ã‚ˆãã‚ã‚‹å¤±æ•—ã‚ã‚‹ã‚ã‚‹ï¼ˆå…ˆã«æ½°ã™ï¼ï¼‰ğŸ’£

![198 common mistakes](./picture/next_study_198_common_mistakes.png)

* âŒ `fill` ãªã®ã«è¦ªè¦ç´ ãŒ `position: relative` ã˜ã‚ƒãªã„ â†’ ç”»åƒãŒå¤‰ãªå ´æ‰€ã«å‡ºã‚‹
* âŒ `sizes` ã‚’ä»˜ã‘ãªã„ â†’ ã‚¹ãƒãƒ›ã§ã‚‚å¤§ãã„ç”»åƒã‚’å–ã‚ŠãŒã¡ã§é‡ããªã‚‹([Next.js][1])
* âŒ `priority` ã‚’ã‚ã¡ã“ã¡ã«ä»˜ã‘ã‚‹ â†’ å…ˆèª­ã¿ãŒå¢—ãˆã¦é€†ã«æ··ã‚€ã“ã¨ãŒã‚ã‚‹ğŸ˜µâ€ğŸ’«
* âŒ ãã‚‚ãã‚‚å…ƒç”»åƒãŒãƒ‡ã‚«ã™ãï¼ˆæ•°MBï¼‰â†’ ã¾ãšãƒªã‚µã‚¤ã‚ºï¼†åœ§ç¸®ã—ã‚ˆğŸ§¼

---

## âœ… ã“ã®ç« ã®ã‚¯ãƒªã‚¢æ¡ä»¶ğŸ‰

* ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒãŒ `next/image` ã§è¡¨ç¤ºã§ããŸğŸ–¼ï¸âœ¨
* ç”»åƒèª­ã¿è¾¼ã¿ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒã‚¬ã‚¯ãƒƒã¨å‹•ãã«ãã„ğŸ§±
* `sizes` ã‚’ä»˜ã‘ã¦ã€Œã‚¹ãƒãƒ›ã¯è»½ãã€PCã¯ã‚­ãƒ¬ã‚¤ã€ã‚’ç‹™ãˆãŸğŸ“±ğŸ’»âš¡
* ä¸»å½¹ç”»åƒã ã‘ `priority` ã«ã§ããŸï¼ˆå¿…è¦ãªã¨ãã ã‘ï¼ï¼‰âš¡

ã“ã“ã¾ã§ã§ããŸã‚‰ç¬¬198ç« ã‚¯ãƒªã‚¢ã ã‚ˆã€œï¼ğŸ™ŒğŸŒ¸

```
::contentReference[oaicite:8]{index=8}
```

[1]: https://nextjs.org/docs/app/api-reference/components/image "Components: Image Component | Next.js"
[2]: https://nextjs.org/docs/app/getting-started/images "Getting Started: Image Optimization | Next.js"
