# ç¬¬11ç« ï¼šSRPå®Ÿæˆ¦ï¼ˆã‚µãƒ¼ãƒ“ã‚¹åˆ†å‰²ã—ã¦ã¿ã‚ˆã†ï¼‰âš”ï¸ğŸ”¥

ä»Šå›ã¯ã¤ã„ã« **ã€Œã§ã£ã‹ã„OrderServiceã‚’ãƒãƒ©ã—ã¦ã€èª­ã¿ã‚„ã™ããƒ»ãƒ†ã‚¹ãƒˆã—ã‚„ã™ãã€**ã—ã¦ã„ãã‚ˆã€œï¼ğŸ¥³âœ¨
SRPï¼ˆå˜ä¸€è²¬ä»»ï¼‰ã£ã¦ã€ç†è§£ã™ã‚‹ã‚ˆã‚Š **æ‰‹ã‚’å‹•ã‹ã—ãŸç¬é–“ã«â€œæ°—æŒã¡ã‚ˆã•â€ãŒåˆ†ã‹ã‚‹**ã‚¿ã‚¤ãƒ—ãªã‚“ã ã‚ˆã­ğŸ§¸ğŸ’•


![SRP Violation Office](./picture/solid_ts_study_011_srp_violation_office.png)

---

## ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ¯âœ¨

* ã€Œã“ã®ã‚¯ãƒ©ã‚¹ã€ãªã‚“ã§å¤‰æ›´ã•ã‚Œã‚‹ã®ï¼Ÿã€ã‚’è¨€èªåŒ–ã§ãã‚‹ğŸ—£ï¸ğŸ’¡
* ã§ã£ã‹ã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ **è¨ˆç®— / ä¿å­˜ / å‡ºåŠ›** ã¿ãŸã„ã«åˆ†å‰²ã§ãã‚‹âœ‚ï¸ğŸ§©
* åˆ†å‰²ã—ãŸçµæœã€**ãƒ†ã‚¹ãƒˆãŒã‚¹ãƒ«ãƒƒã¨æ›¸ã‘ã‚‹**ã®ã‚’ä½“é¨“ã§ãã‚‹âœ…ğŸ§«
* ã€Œåˆ†ã‘ã™ãåœ°ç„ã€ã‚‚é¿ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹âš ï¸ğŸ˜‡

---

## ã¾ãšSRPã‚’â€œå®Ÿæˆ¦ç”¨â€ã«è¨€ã„æ›ãˆã‚‹ã­ğŸ’¬ğŸŒ¸

SRPã¯ã“ã‚Œã ã‘è¦šãˆã¦ã‚Œã°OKï¼ğŸ‘‡âœ¨

> **ã€Œå¤‰æ›´ã•ã‚Œã‚‹ç†ç”±ï¼ˆChange Reasonï¼‰ã€ãŒ1ã¤ã ã‘ã«ãªã‚‹ã‚ˆã†ã«ã™ã‚‹**ğŸ§ ğŸ”§

é€†ã«ã€ã“ã†ã„ã†â€œå¤‰æ›´ç†ç”±ãŒè¤‡æ•°â€ã«ãªã£ã¦ã‚‹ã¨SRPé•åã«ãªã‚Šã‚„ã™ã„ã‚ˆã€œğŸ˜µğŸ’¥

* æ–™é‡‘ãƒ«ãƒ¼ãƒ«ãŒå¤‰ã‚ã£ãŸã‚‰ç›´ã™å¿…è¦ãŒã‚ã‚‹ğŸ’°
* DBä¿å­˜æ–¹æ³•ãŒå¤‰ã‚ã£ãŸã‚‰ç›´ã™å¿…è¦ãŒã‚ã‚‹ğŸ—„ï¸
* ãƒ¬ã‚·ãƒ¼ãƒˆã®è¦‹ãŸç›®ãŒå¤‰ã‚ã£ãŸã‚‰ç›´ã™å¿…è¦ãŒã‚ã‚‹ğŸ§¾

â†‘ã“ã‚Œå…¨éƒ¨ã‚’1ã‚¯ãƒ©ã‚¹ãŒæŠ±ãˆã‚‹ã¨ã€æœªæ¥ã§æ³£ãğŸ˜­ğŸ’¦

![Change Reason Examples](./picture/solid_ts_study_011_change_reason_examples.png)

---

## ä»Šæ—¥ã®é¡Œæï¼šã¾ãšã¯â€œã‚ã–ã¨æœ€æ‚ªâ€ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆğŸ˜ˆğŸ§ª

ã€ŒCampus CafÃ© æ³¨æ–‡ã‚¢ãƒ—ãƒªã€â˜•ï¸ğŸ°ã®æ³¨æ–‡å‡¦ç†ã§ã€ã‚ã‚ŠãŒã¡ãª **God Serviceï¼ˆå…¨éƒ¨å…¥ã‚Šï¼‰** ã‚’ç”¨æ„ã™ã‚‹ã‚ˆï¼

### ğŸ± æ‚ªã„ä¾‹ï¼šãªã‚“ã§ã‚‚å±‹ã® `OrderService`ï¼ˆSRPé•åï¼‰

![God Service Burden](./picture/solid_ts_study_011_god_service_burden.png)

```ts
// src/order/OrderService.ts
type OrderItem = { sku: string; name: string; price: number; qty: number };
type Coupon = { code: string; type: "PERCENT" | "FLAT"; value: number };

type Order = {
  id: string;
  items: OrderItem[];
  coupon?: Coupon;
  createdAt: Date;
};

export class OrderService {
  private orders: Order[] = []; // ãªã‚“ã¨ä¿å­˜ã¾ã§ã“ã“ã§â€¦ğŸ˜‡

  placeOrder(items: OrderItem[], coupon?: Coupon): { orderId: string; total: number } {
    // â‘  æ–™é‡‘è¨ˆç®—ï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼‰ğŸ’°
    const subtotal = items.reduce((sum, i) => sum + i.price * i.qty, 0);

    let discount = 0;
    if (coupon) {
      if (coupon.type === "PERCENT") discount = Math.floor(subtotal * (coupon.value / 100));
      if (coupon.type === "FLAT") discount = coupon.value;
    }

    const total = Math.max(0, subtotal - discount);

    // â‘¡ æ³¨æ–‡ä½œæˆï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³/çŠ¶æ…‹ï¼‰ğŸ“¦
    const order: Order = {
      id: crypto.randomUUID(),
      items,
      coupon,
      createdAt: new Date(),
    };

    // â‘¢ ä¿å­˜ï¼ˆæ°¸ç¶šåŒ–ï¼‰ğŸ—„ï¸
    this.orders.push(order);

    // â‘£ ãƒ¬ã‚·ãƒ¼ãƒˆå‡ºåŠ›ï¼ˆè¡¨ç¤º/ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ/å‰¯ä½œç”¨ï¼‰ğŸ§¾ğŸ–¨ï¸
    const lines: string[] = [];
    lines.push("=== Campus CafÃ© Receipt ===");
    lines.push(`OrderId: ${order.id}`);
    lines.push(`Date: ${order.createdAt.toISOString()}`);
    lines.push("--- items ---");
    for (const item of items) {
      lines.push(`${item.name} x${item.qty} = ${item.price * item.qty}`);
    }
    lines.push(`Subtotal: ${subtotal}`);
    if (coupon) lines.push(`Coupon(${coupon.code}): -${discount}`);
    lines.push(`Total: ${total}`);
    lines.push("===========================");

    console.log(lines.join("\n"));

    return { orderId: order.id, total };
  }
}
```

ã†ã‚“ã€æœ€é«˜ã«â€œã‚ã‚‹ã‚ã‚‹â€ã ã­ğŸ˜‚ğŸ§¨
ã“ã® `OrderService` ã¯ **å¤‰æ›´ç†ç”±ãŒ4ã¤** ã‚ã‚‹ã‹ã‚‰ã€ä½•ã‹ç›´ã™ãŸã³ã«äº‹æ•…ã‚Šã‚„ã™ã„ğŸ’¥

---

## åˆ†å‰²æ–¹é‡ï¼šè²¬å‹™ã‚’â€œ3ã¤ã®ç®±â€ã«å…¥ã‚Œã¦ã„ãã‚ˆğŸ“¦ğŸ“¦ğŸ“¦

![3 Layers](./picture/solid_ts_study_011_layer_boxes.png)

ã¾ãšã¯é›‘ã«ã“ã‚Œã§OKï¼âœ¨ï¼ˆç´°ã‹ã„ç¾å­¦ã¯å¾Œã§è‚²ã¦ã‚ˆã†ğŸŒ±ï¼‰

| ç®±             | å½¹å‰²            | å¤‰æ›´ç†ç”±ã®ä¾‹          |
| ------------- | ------------- | --------------- |
| ğŸ§  è¨ˆç®—ï¼ˆç´”ç²‹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰ | é‡‘é¡ãƒ»å‰²å¼•ãƒ»åˆè¨ˆ      | å‰²å¼•ãƒ«ãƒ¼ãƒ«è¿½åŠ ã€ä¸¸ã‚å¤‰æ›´    |
| ğŸ—„ï¸ ä¿å­˜ï¼ˆI/Oï¼‰   | ã©ã“ã«ã©ã†ä¿å­˜ã™ã‚‹ã‹    | DBå°å…¥ã€APIä¿å­˜ã€å½¢å¼å¤‰æ›´ |
| ğŸ§¾ å‡ºåŠ›ï¼ˆè¦‹ãŸç›®ï¼‰    | ãƒ¬ã‚·ãƒ¼ãƒˆæ–‡é¢/ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ | è¡¨ç¤ºå¤‰æ›´ã€æ¡åŒºåˆ‡ã‚Šã€è¨€èªå¯¾å¿œ  |

ã“ã®åˆ†ã‘æ–¹ã€**ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã•ãŒçˆ†ä¸ŠãŒã‚Š**ã™ã‚‹ã‚ˆğŸ”¥âœ…

---

## Step 1ï¼šæ–™é‡‘è¨ˆç®—ã‚’ `PriceCalculator` ã«åˆ‡ã‚Šå‡ºã™ğŸ’°âœ‚ï¸

![Extracting Logic](./picture/solid_ts_study_011_extract_logic.png)

SRPåˆ†å‰²ã®æœ€åˆã®ä¸€æ‰‹ã¯ã ã„ãŸã„ã“ã‚Œï¼

> **å‰¯ä½œç”¨ãŒãªã„ç´”ç²‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¨ˆç®—ï¼‰ã‚’å¤–ã¸å‡ºã™**ğŸ§¼âœ¨

```ts
// src/pricing/PriceCalculator.ts
export type OrderItem = { sku: string; name: string; price: number; qty: number };
export type Coupon = { code: string; type: "PERCENT" | "FLAT"; value: number };

export type PriceBreakdown = {
  subtotal: number;
  discount: number;
  total: number;
};

export class PriceCalculator {
  calc(items: OrderItem[], coupon?: Coupon): PriceBreakdown {
    const subtotal = items.reduce((sum, i) => sum + i.price * i.qty, 0);

    const discount = coupon ? this.calcDiscount(subtotal, coupon) : 0;
    const total = Math.max(0, subtotal - discount);

    return { subtotal, discount, total };
  }

  private calcDiscount(subtotal: number, coupon: Coupon): number {
    if (coupon.type === "PERCENT") return Math.floor(subtotal * (coupon.value / 100));
    if (coupon.type === "FLAT") return coupon.value;
    // å°†æ¥typeãŒå¢—ãˆãŸæ™‚ã«æ°—ã¥ã‘ã‚‹ã‚ˆã†ã«â€¦ğŸ˜‰
    return 0;
  }
}
```

ã“ã‚Œã§ã€Œå‰²å¼•ãƒ«ãƒ¼ãƒ«ã‚’å¤‰ãˆãŸã„ã€ã£ã¦æ™‚ã€**PriceCalculatorã ã‘ã‚’è§¦ã‚Œã°ã„ã„**çŠ¶æ…‹ã«è¿‘ã¥ã„ãŸã‚ˆã€œï¼ğŸ¥³âœ¨

---

## Step 2ï¼šä¿å­˜ã‚’ `OrderRepository` ã«åˆ†é›¢ã™ã‚‹ğŸ—„ï¸âœ‚ï¸

![Repository Isolation](./picture/solid_ts_study_011_repository_isolation.png)

æ¬¡ã¯ã€Œä¿å­˜å…ˆãŒå¤‰ã‚ã‚‹ã€ã£ã¦ç†ç”±ã‚’å¤–ã¸é€ƒãŒã™ã‚ˆï¼

```ts
// src/order/Order.ts
import type { OrderItem, Coupon } from "../pricing/PriceCalculator.js";

export type Order = {
  id: string;
  items: OrderItem[];
  coupon?: Coupon;
  createdAt: Date;
};
```

```ts
// src/order/OrderRepository.ts
import type { Order } from "./Order.js";

export interface OrderRepository {
  save(order: Order): Promise<void>;
}
```

ã¾ãšã¯ç°¡å˜ã«ãƒ¡ãƒ¢ãƒªä¿å­˜ã§OKï¼ï¼ˆDBã¯å¾Œã§ã‚„ã‚‹âœ¨ï¼‰

```ts
// src/order/InMemoryOrderRepository.ts
import type { Order } from "./Order.js";
import type { OrderRepository } from "./OrderRepository.js";

export class InMemoryOrderRepository implements OrderRepository {
  private readonly orders: Order[] = [];

  async save(order: Order): Promise<void> {
    this.orders.push(order);
  }

  // ãƒ†ã‚¹ãƒˆç”¨ã«è¦—ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ã‚‚OKï¼ˆæœ¬ç•ªã§ã¯éš ã™ã“ã¨å¤šã„ã‚ˆï¼‰ğŸ˜‰
  getAll(): readonly Order[] {
    return this.orders;
  }
}
```

---

## Step 3ï¼šãƒ¬ã‚·ãƒ¼ãƒˆå‡ºåŠ›ã‚’ `ReceiptBuilder` ã«åˆ†é›¢ã™ã‚‹ğŸ§¾âœ‚ï¸

![Receipt Builder](./picture/solid_ts_study_011_receipt_builder.png)

ãƒ¬ã‚·ãƒ¼ãƒˆã¯ã€Œè¦‹ãŸç›®ã€ãŒå¤‰ã‚ã‚Šã‚„ã™ã„ã‹ã‚‰ã€ã“ã“ã‚‚åˆ¥ç®±ã¸ğŸ“¦âœ¨
ãƒã‚¤ãƒ³ãƒˆã¯ **â€œæ–‡å­—åˆ—ã‚’ä½œã‚‹ã ã‘â€** ã«ã—ã¦ã€å‰¯ä½œç”¨ï¼ˆconsole.logï¼‰ã¨åˆ†ã‘ã‚‹ã¨ã•ã‚‰ã«å¼·ã„ã‚ˆğŸ’ª

```ts
// src/receipt/ReceiptBuilder.ts
import type { Order } from "../order/Order.js";
import type { PriceBreakdown } from "../pricing/PriceCalculator.js";

export class ReceiptBuilder {
  build(order: Order, price: PriceBreakdown): string {
    const lines: string[] = [];
    lines.push("=== Campus CafÃ© Receipt ===");
    lines.push(`OrderId: ${order.id}`);
    lines.push(`Date: ${order.createdAt.toISOString()}`);
    lines.push("--- items ---");

    for (const item of order.items) {
      lines.push(`${item.name} x${item.qty} = ${item.price * item.qty}`);
    }

    lines.push(`Subtotal: ${price.subtotal}`);
    if (order.coupon) lines.push(`Coupon(${order.coupon.code}): -${price.discount}`);
    lines.push(`Total: ${price.total}`);
    lines.push("===========================");

    return lines.join("\n");
  }
}
```

ãã—ã¦ã€Œå‡ºåŠ›ã™ã‚‹å½¹ã€ã‚’å°ã•ãä½œã‚‹ğŸ–¨ï¸âœ¨

```ts
// src/receipt/ReceiptPrinter.ts
export interface ReceiptPrinter {
  print(text: string): void;
}
```

```ts
// src/receipt/ConsoleReceiptPrinter.ts
import type { ReceiptPrinter } from "./ReceiptPrinter.js";

export class ConsoleReceiptPrinter implements ReceiptPrinter {
  print(text: string): void {
    console.log(text);
  }
}
```

---

## Step 4ï¼šè–„ããªã£ãŸ `OrderService`ï¼ˆå¸ä»¤å¡”ã ã‘ã‚„ã‚‹ï¼‰ğŸ§ âœ¨

![Thin Coordinator](./picture/solid_ts_study_011_thin_coordinator.png)

æœ€å¾Œã« `OrderService` ã‚’ã€Œæ³¨æ–‡ãƒ•ãƒ­ãƒ¼ã®çµ„ã¿ç«‹ã¦å½¹ã€ã ã‘ã«ã™ã‚‹ã‚ˆï¼

```ts
// src/order/OrderService.ts
import { PriceCalculator, type OrderItem, type Coupon } from "../pricing/PriceCalculator.js";
import type { Order } from "./Order.js";
import type { OrderRepository } from "./OrderRepository.js";
import { ReceiptBuilder } from "../receipt/ReceiptBuilder.js";
import type { ReceiptPrinter } from "../receipt/ReceiptPrinter.js";

export class OrderService {
  constructor(
    private readonly priceCalculator: PriceCalculator,
    private readonly orderRepo: OrderRepository,
    private readonly receiptBuilder: ReceiptBuilder,
    private readonly receiptPrinter: ReceiptPrinter,
  ) {}

  async placeOrder(items: OrderItem[], coupon?: Coupon): Promise<{ orderId: string; total: number }> {
    const order: Order = {
      id: crypto.randomUUID(),
      items,
      coupon,
      createdAt: new Date(),
    };

    const price = this.priceCalculator.calc(items, coupon);

    await this.orderRepo.save(order);

    const receipt = this.receiptBuilder.build(order, price);
    this.receiptPrinter.print(receipt);

    return { orderId: order.id, total: price.total };
  }
}
```

ã©ã†ï¼Ÿâœ¨
**OrderServiceãŒã‚ã¡ã‚ƒè–„ããªã£ã¦ã€èª­ã‚“ã ç¬é–“ã«æµã‚ŒãŒåˆ†ã‹ã‚‹**ã‚ˆã†ã«ãªã£ãŸã‚ˆã­ğŸ¥¹ğŸ’•

---

## ã“ã“ã§â€œSRPã®å‹åˆ©â€ãŒèµ·ãã‚‹ğŸ†âœ¨ï¼ˆãƒ†ã‚¹ãƒˆãŒæ¥½ï¼ï¼‰

![Testability Win](./picture/solid_ts_study_011_testability_win.png)

### âœ… æ–™é‡‘è¨ˆç®—ã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆãŒè¶…ç°¡å˜ğŸ’°

ï¼ˆVitestã¯4ç³»ãŒç¶™ç¶šçš„ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã‚‹ã‚ˆã€œï¼‰ ([GitHub][1])

```ts
// test/PriceCalculator.test.ts
import { describe, it, expect } from "vitest";
import { PriceCalculator } from "../src/pricing/PriceCalculator.js";

describe("PriceCalculator", () => {
  it("ã‚¯ãƒ¼ãƒãƒ³ãªã—ã®åˆè¨ˆãŒå‡ºã›ã‚‹", () => {
    const calc = new PriceCalculator();
    const price = calc.calc([
      { sku: "A", name: "Coffee", price: 300, qty: 2 },
      { sku: "B", name: "Cake", price: 450, qty: 1 },
    ]);

    expect(price.subtotal).toBe(1050);
    expect(price.discount).toBe(0);
    expect(price.total).toBe(1050);
  });

  it("PERCENTã‚¯ãƒ¼ãƒãƒ³ãŒåŠ¹ã", () => {
    const calc = new PriceCalculator();
    const price = calc.calc(
      [{ sku: "A", name: "Coffee", price: 300, qty: 2 }],
      { code: "STUDENT10", type: "PERCENT", value: 10 },
    );

    expect(price.subtotal).toBe(600);
    expect(price.discount).toBe(60);
    expect(price.total).toBe(540);
  });
});
```

### âœ… OrderServiceã¯ã€Œå·®ã—æ›¿ãˆã€ã§ãƒ†ã‚¹ãƒˆã§ãã‚‹ğŸ­âœ¨

```ts
// test/OrderService.test.ts
import { describe, it, expect, vi } from "vitest";
import { OrderService } from "../src/order/OrderService.js";
import { PriceCalculator } from "../src/pricing/PriceCalculator.js";
import { ReceiptBuilder } from "../src/receipt/ReceiptBuilder.js";
import type { OrderRepository } from "../src/order/OrderRepository.js";
import type { ReceiptPrinter } from "../src/receipt/ReceiptPrinter.js";

describe("OrderService", () => {
  it("æ³¨æ–‡ã™ã‚‹ã¨ä¿å­˜ã•ã‚Œã¦ãƒ¬ã‚·ãƒ¼ãƒˆãŒå°åˆ·ã•ã‚Œã‚‹", async () => {
    const repo: OrderRepository = { save: vi.fn(async () => {}) };
    const printer: ReceiptPrinter = { print: vi.fn() };

    const service = new OrderService(
      new PriceCalculator(),
      repo,
      new ReceiptBuilder(),
      printer,
    );

    const result = await service.placeOrder([{ sku: "A", name: "Coffee", price: 300, qty: 1 }]);

    expect(result.total).toBe(300);
    expect(repo.save).toHaveBeenCalledTimes(1);
    expect(printer.print).toHaveBeenCalledTimes(1);
  });
});
```

**SRPã§åˆ†ã‘ãŸç¬é–“ã€ãƒ†ã‚¹ãƒˆãŒã€Œæ›¸ã‘ã‚‹å½¢ã€ã«ãªã‚‹**ã‚“ã ã‚ˆã­â€¦ï¼ğŸ¥¹ğŸ«¶

---

## AIï¼ˆCopilot/Codexç³»ï¼‰ã‚’ä½¿ã†ãªã‚‰ã€ã“ã®èãæ–¹ãŒå¼·ã„ã‚ˆğŸ¤–âœ¨

### ğŸ’¬ åˆ†å‰²æ¡ˆã‚’å‡ºã•ã›ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹

* ã€Œã“ã®ã‚¯ãƒ©ã‚¹ã®â€œå¤‰æ›´ç†ç”±â€ã‚’åˆ—æŒ™ã—ã¦ã€SRPã§åˆ†å‰²æ¡ˆã‚’3ãƒ‘ã‚¿ãƒ¼ãƒ³å‡ºã—ã¦ã€ğŸ§ 
* ã€Œå‰¯ä½œç”¨ï¼ˆI/Oï¼‰ã¨ç´”ç²‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¨ˆç®—ï¼‰ã‚’åˆ†ã‘ã¦ã€ãƒ†ã‚¹ãƒˆä¾‹ã‚‚ä½œã£ã¦ã€ğŸ§ª
* ã€Œåˆ†å‰²å¾Œã«ä¾å­˜é–¢ä¿‚ãŒå¢—ãˆã™ããªã„ã‚ˆã†ã«æ³¨æ„ç‚¹ã‚‚æ·»ãˆã¦ã€âš ï¸

### âœ… AIã®ææ¡ˆã‚’æ¡ç”¨ã™ã‚‹å‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆğŸ”

* ãã®åˆ†å‰²ã¯ã€Œå¤‰æ›´ç†ç”±ã€ãŒ1ã¤ã«å¯„ã£ã¦ã‚‹ï¼ŸğŸ¯
* `OrderService` ãŒâ€œå¸ä»¤å¡”â€ã®ã¾ã¾è–„ã„ï¼ŸğŸ§ 
* è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãŒå‰¯ä½œç”¨ã‹ã‚‰éš”é›¢ã•ã‚Œã¦ã‚‹ï¼ŸğŸ§¼
* ã‚¯ãƒ©ã‚¹å¢—ã‚„ã—ã™ãã¦ã€é€†ã«èª­ã¿ã«ããã—ã¦ãªã„ï¼ŸğŸ˜‡

---

## ã‚ˆãã‚ã‚‹å¤±æ•—ã‚ã‚‹ã‚ã‚‹ï¼ˆå…ˆã«æ½°ã™ï¼‰ğŸ§¯ğŸ’¥

### â¶ 1ãƒ¡ã‚½ãƒƒãƒ‰1ã‚¯ãƒ©ã‚¹ç—…ğŸ“›

å°ã•ãã—ã™ãã¦ã€Œãˆã€ã©ã“è¦‹ã‚Œã°ã„ã„ã®â€¦ã€ã«ãªã‚‹ã‚„ã¤ğŸ˜‚
â¡ï¸ **â€œå¤‰æ›´ç†ç”±â€ãŒåŒã˜ãªã‚‰åŒå±…ã§OK**ã ã‚ˆã€œï¼

### â· åå‰ãŒãƒ•ãƒ¯ãƒƒã¨ã—ã¦è²¬å‹™ãŒæ··ã–ã‚‹ğŸŒ«ï¸

`Manager` / `Helper` / `Util` ã¨ã‹ãŒå¢—ãˆã‚‹ã¨å±é™ºğŸš¨
â¡ï¸ **åè©ï¼‹å½¹å‰²**ï¼ˆCalculator / Builder / Repositoryï¼‰ãŒå®‰å®šâœ¨

### â¸ å¸ä»¤å¡”ãŒã¾ãŸå¤ªã‚‹ğŸ–

åˆ†å‰²ã—ã¦ã‚‚ `OrderService` ã«ãƒ­ã‚¸ãƒƒã‚¯ãŒæˆ»ã£ã¦ãã‚‹ã‚„ã¤ğŸ˜­
â¡ï¸ **å¸ä»¤å¡”ã¯ã€Œé †ç•ªã€ã¨ã€Œã¤ãªãã€ã ã‘ï¼**ğŸ”

---

## ã¾ã¨ã‚ğŸ§¸âœ¨

* SRPã¯ **ã€Œå¤‰æ›´ç†ç”±ã‚’1ã¤ã«ã™ã‚‹ã€** ãŒã‚³ã‚¢ğŸ§ 
* å®Ÿæˆ¦ã§ã¯ã¾ãš **è¨ˆç®—ï¼ˆç´”ç²‹ï¼‰/ ä¿å­˜ï¼ˆI/Oï¼‰/ å‡ºåŠ›ï¼ˆè¦‹ãŸç›®ï¼‰** ã«åˆ†ã‘ã‚‹ã¨æˆåŠŸã—ã‚„ã™ã„ğŸ“¦âœ¨
* åˆ†ã‘ãŸç¬é–“ã€ãƒ†ã‚¹ãƒˆãŒã‚¹ãƒ«ã‚¹ãƒ«æ›¸ã‘ã¦æ°—æŒã¡ã„ã„âœ…ğŸ«¶

---

## ã¡ã‚‡ã„æœ€æ–°ãƒˆãƒ”ãƒƒã‚¯è±†çŸ¥è­˜ğŸ¬âœ¨ï¼ˆ2026å¹´1æœˆæ™‚ç‚¹ï¼‰

* TypeScriptã¯ **5.9ç³»ãŒæœ€æ–°ãƒ©ã‚¤ãƒ³**ã¨ã—ã¦æ¡ˆå†…ã•ã‚Œã¦ã‚‹ã‚ˆï¼ˆnpmã§ã¯5.9.3ï¼‰ã€‚ ([TypeScript][2])
* 5.9ã§ã¯ `import defer` ãªã©ã®æ–°æ©Ÿèƒ½ã‚‚å…¥ã£ã¦ã‚‹ã‚ˆï¼ˆå¤§è¦æ¨¡ã‚³ãƒ¼ãƒ‰ã®å‰¯ä½œç”¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã«é–¢ä¿‚ã™ã‚‹ã‚„ã¤ï¼‰ã€‚ ([TypeScript][3])
* ESLintå‘¨ã‚Šï¼ˆtypescript-eslintï¼‰ã¯ç¶™ç¶šçš„ã«æ›´æ–°ã•ã‚Œã¦ã¦ã€ç›´è¿‘ã‚‚ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã‚‹ã‚ˆã€‚ ([GitHub][4])

---

æ¬¡ã®ç¬¬12ç« ï¼ˆOCPï¼‰ã§ã¯ã€ä»Šæ—¥ä½œã£ãŸåˆ†å‰²ã‚’åœŸå°ã«ã—ã¦ **ã€Œå‰²å¼•ãŒå¢—ãˆã¦ã‚‚åœ°ç„ã«ãªã‚‰ãªã„è¨­è¨ˆã€**ã«é€²åŒ–ã•ã›ã‚‹ã‚ˆã€œğŸŸï¸ğŸ”¥

[1]: https://github.com/vitest-dev/vitest/releases "Releases Â· vitest-dev/vitest Â· GitHub"
[2]: https://www.typescriptlang.org/download/ "TypeScript: How to set up TypeScript"
[3]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-9.html "TypeScript: Documentation - TypeScript 5.9"
[4]: https://github.com/typescript-eslint/typescript-eslint/releases?utm_source=chatgpt.com "Releases Â· typescript-eslint/typescript-eslint"
