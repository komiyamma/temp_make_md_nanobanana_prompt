# ç¬¬242ç« ï¼šJotai ã®åŸºæœ¬ (`atom`)

ã“ã®ç« ã§ã¯ **Jotaiã®å¿ƒè‡“éƒ¨**ã§ã‚ã‚‹ `atom` ã‚’è¦šãˆã¾ã™ï¼
ã€Œatom = ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’å…¥ã‚Œã‚‹â€œæœ€å°å˜ä½ã®ç®±â€ã€ã£ã¦æ„Ÿã˜ã§ã™ğŸ“¦âœ¨

---

## ã“ã®ç« ã®ã‚´ãƒ¼ãƒ« ğŸ¯

* `atom` ãŒä½•ã‹èª¬æ˜ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹
* `atom` ã‚’ **å‹ä»˜ã(TypeScript)** ã§ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹
* atomã‚’ç½®ããƒ•ã‚¡ã‚¤ãƒ«è¨­è¨ˆï¼ˆç½®ãå ´æ‰€ï¼‰ã‚’æ±ºã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹

---

## ã¾ãšã¯ `atom` ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã¤ã‹ã‚‚ã† ğŸ§ âœ¨

### âœ… `atom` ã£ã¦ãªã«ï¼Ÿ

* çŠ¶æ…‹ï¼ˆstateï¼‰ã‚’å…¥ã‚Œã‚‹ **å°ã•ãª1ç²’**ğŸ¬
* å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã€ãã®ç²’ã‚’â€œèª­ã‚“ã ã‚Šæ›¸ã„ãŸã‚Šâ€ã™ã‚‹æ„Ÿã˜

### âœ… JotaiãŒå¬‰ã—ã„ãƒã‚¤ãƒ³ãƒˆ

* ã€Œã§ã£ã‹ã„çŠ¶æ…‹ã®å¡Šã€ã‚’ä½œã‚‰ãªãã¦ã„ã„ï¼ˆå¿…è¦ãªåˆ†ã ã‘ğŸ¬ğŸ¬ğŸ¬ï¼‰
* ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã§ã‚‚åŒã˜atomã‚’ä½¿ãˆã‚‹ï¼ˆPropsãƒªãƒ¬ãƒ¼æ¸›ã‚‹ğŸâ¡ï¸ğŸâ¡ï¸ğŸãŒæ¸›ã‚‹ï¼‰

---

## å›³ã§è¦‹ã‚‹ï¼šJotaiã®ä¸–ç•Œ ğŸŒï¼ˆMermaidï¼‰

![Jotai Atom Basics](./picture/react_study_242_atom_basics.png)

```mermaid
flowchart LR
  A["atoms ğŸ§ŠğŸ¬<br>(#quot;atomã§ä½œã£ãŸçŠ¶æ…‹#quot;)"] --> S[("Jotai Store ğŸª<br>çŠ¶æ…‹ã®ç½®ãå ´æ‰€")]
  S --> C1[Component A ğŸ˜º]
  S --> C2[Component B ğŸ¶]
  S --> C3[Component C ğŸ°]
  C1 <-->|read/write| S
  C2 <-->|read/write| S
  C3 <-->|read/write| S
```

ã€Œatomã¯éƒ¨å“ã€â†’ã€ŒStoreï¼ˆç½®ãå ´ï¼‰ã«ä¸¦ã¶ã€â†’ã€Œå¿…è¦ãªéƒ¨å“ãŒä½¿ã†ã€ã£ã¦æµã‚Œã§ã™ğŸªâœ¨

---

## 1) Jotai ã‚’å…¥ã‚Œã‚ˆã†ï¼ˆWindows / PowerShellï¼‰ğŸ’»âœ¨

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ã§ğŸ‘‡

```bash
npm i jotai
```

---

## 2) `atom` ã‚’ä½œã£ã¦ã¿ã‚ˆã†ï¼ˆæœ€å°ã®ä¾‹ï¼‰ğŸ¬

![react_study_242_folder_structure.png](./picture/react_study_242_folder_structure.png)

### ğŸ“ãŠã™ã™ã‚ã®ç½®ãå ´æ‰€

`src/atoms/` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ã¦ã€atomã‚’ã¾ã¨ã‚ã‚‹ã®ãŒã‚¹ãƒƒã‚­ãƒªã—ã¾ã™ğŸ§¹âœ¨

ä¾‹ï¼š

* `src/atoms/counterAtom.ts`
* `src/atoms/userAtom.ts`

---

## 3) æ•°å­—ã®atomï¼ˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ç”¨ï¼‰ã‚’ä½œã‚‹ ğŸ”¢

![react_study_242_atom_number.png](./picture/react_study_242_atom_number.png)


`src/atoms/counterAtom.ts`

```ts
import { atom } from "jotai";

// æ•°å­—ã®çŠ¶æ…‹ã‚’å…¥ã‚Œã‚‹atomï¼ˆåˆæœŸå€¤ã¯0ï¼‰
export const countAtom = atom<number>(0);
```

### ãƒã‚¤ãƒ³ãƒˆğŸŒŸ

* `atom<number>(0)` ã§ã€Œã“ã®atomã¯numberã ã‚ˆï¼ã€ã£ã¦å®£è¨€ã§ãã‚‹ğŸ‘Œ
* åˆæœŸå€¤ã¯ `0`

---

## 4) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®atomï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼‰ã‚’ä½œã‚‹ ğŸ§‘â€ğŸ“âœ¨

![react_study_242_atom_object.png](./picture/react_study_242_atom_object.png)


`src/atoms/userAtom.ts`

```ts
import { atom } from "jotai";

export type User = {
  name: string;
  grade: number; // å­¦å¹´ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆ1ã€œ4ï¼‰
};

export const userAtom = atom<User>({
  name: "Sakura",
  grade: 2,
});
```

### ãƒã‚¤ãƒ³ãƒˆğŸŒŸ

* atomã¯ **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚OK** ğŸ™†â€â™€ï¸
* `type User` ã‚’ä½œã£ã¦ãŠãã¨ç®¡ç†ãŒæ¥½ã¡ã‚“ğŸ’•

---

## 5) atomã®ã€Œèª­ã¿æ›¸ãã€ã¯æ¬¡ç« ã§ã‚„ã‚‹ã‘ã©â€¦ã¡ã‚‡ã„è¦‹ã›ğŸ‘€âœ¨

![react_study_242_useatom_preview.png](./picture/react_study_242_useatom_preview.png)


ã€Œatomä½œã£ãŸã ã‘ã ã¨å‹•ã„ã¦ã‚‹ã‹ä¸å®‰ğŸ˜µâ€ğŸ’«ã€ã£ã¦ãªã‚‹ã®ã§ã€è¶…ãƒŸãƒ‹ã§é›°å›²æ°—ã ã‘ï¼

`src/App.tsx`

```tsx
import { useAtom } from "jotai";
import { countAtom } from "./atoms/counterAtom";

export default function App() {
  const [count, setCount] = useAtom(countAtom);

  return (
    <div style={{ padding: 24 }}>
      <h1>Jotai Counter âš›ï¸ğŸ¬</h1>
      <p>count: {count}</p>
      <button onClick={() => setCount((c) => c + 1)}>+1</button>
    </div>
  );
}
```

ã“ã“ã¯ã€Œã¸ã‡ã€œã“ã†ã‚„ã£ã¦ä½¿ã†ã‚“ã ã€œğŸ˜³ã€ã§OKï¼
**æ¬¡ã®ç¬¬243ç« ã§ `useAtom` ã‚’ã¡ã‚ƒã‚“ã¨ã‚„ã‚Šã¾ã™**ğŸ“˜âœ¨

---

## `atom` ã®è¶…é‡è¦ãƒ«ãƒ¼ãƒ«ï¼ˆã“ã“å¤§äº‹ï¼ï¼‰ğŸ§ ğŸ”¥

### âœ… atomã¯ã€ŒçŠ¶æ…‹ã®å®šç¾©ã€

* `atom(åˆæœŸå€¤)` ã§ã€ŒçŠ¶æ…‹ã®ç®±ã€ã‚’ä½œã‚‹

### âœ… atomã¯ã©ã“ã«ç½®ãï¼Ÿ

* ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸­ã«ãƒ™ã‚¿æ›¸ãã—ãªã„æ–¹ãŒã„ã„ã“ã¨ãŒå¤šã„ã§ã™ğŸ™…â€â™€ï¸
  ï¼ˆå†åˆ©ç”¨ã—ãŸã„ã—ã€æ•´ç†ã—ãŸã„ã—ã€ãƒ†ã‚¹ãƒˆã‚‚ã—ã‚„ã™ã„ã—âœ¨ï¼‰

ãŠã™ã™ã‚ã¯ï¼š

* `src/atoms/` ã«é›†ã‚ã‚‹ï¼ˆä»Šå›ã®å½¢ğŸ‘ï¼‰

---

## ã‚ˆãã‚ã‚‹ã¤ã¾ãšã ğŸŒ€ğŸ˜µ

### âŒ `atom` ã‚’ `default export` ã—ã¡ã‚ƒã£ã¦è¿·å­

atomã¯æ•°ãŒå¢—ãˆã‚„ã™ã„ã®ã§ã€åŸºæœ¬ã¯ `export const xxxAtom` ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ğŸ“¦âœ¨

### âŒ ã€Œatomä½œã£ãŸã®ã«ç”»é¢å¤‰ã‚ã‚‰ãªã„ï¼ã€

atomã¯ä½œã£ãŸã ã‘ã ã¨è¡¨ç¤ºã«ã¯å‡ºã¾ã›ã‚“ğŸ˜‚
`useAtom` ãªã©ã§ä½¿ã£ã¦åˆã‚ã¦å‹•ãã¾ã™ï¼ˆæ¬¡ç« ã§ã‚„ã‚‹ã‚ˆï¼ï¼‰

---

## ãƒŸãƒ‹èª²é¡Œï¼ˆã‚„ã£ã¦ã¿ã‚ˆğŸ’ªğŸ¥³ï¼‰

### ğŸ¯èª²é¡ŒA

`src/atoms/themeAtom.ts` ã‚’ä½œã£ã¦ã€æ–‡å­—åˆ—ã®atomã‚’ä½œã‚ã†ï¼

* åˆæœŸå€¤ï¼š`"light"`
* å‹ï¼š`"light" | "dark"`

ãƒ’ãƒ³ãƒˆğŸ‘‡

```ts
import { atom } from "jotai";

export const themeAtom = atom<"light" | "dark">("light");
```

---

## ã¾ã¨ã‚ âœ¨ğŸ“Œ

* `atom` ã¯ **çŠ¶æ…‹ã®æœ€å°å˜ä½**ğŸ¬
* `atom<T>(åˆæœŸå€¤)` ã§ **å‹ä»˜ãã§ä½œã‚Œã‚‹**âœ…
* atomã¯ `src/atoms/` ã«ã¾ã¨ã‚ã‚‹ã¨æ°—æŒã¡ã„ã„ğŸ§¹âœ¨
* æ¬¡ç« ã§ `useAtom` ã‚’ä½¿ã£ã¦ã€Œèª­ã¿æ›¸ãã€ã‚’å®Œå…¨ã«ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹ã‚ˆã€œï¼âš›ï¸ğŸ”¥
