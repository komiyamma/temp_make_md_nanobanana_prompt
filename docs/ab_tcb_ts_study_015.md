# ç¬¬15ç« ï¼šé›†ç´„ã«å…¥ã‚Œã¦ã„ã„ã‚‚ã®ï¼ãƒ€ãƒ¡ãªã‚‚ã®ï¼ˆI/Oåˆ†é›¢ï¼‰ğŸš«ğŸ”Œ

## 15.1 ã¾ãšçµè«–ï¼šé›†ç´„ã¯ã€Œç´”ç²‹ã«ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ«ãƒ¼ãƒ«æ‹…å½“ã€ğŸ§ âœ¨

é›†ç´„ï¼ˆAggregateï¼‰ã¯ **ä¸å¤‰æ¡ä»¶ï¼ˆå£Šã‚Œã¡ã‚ƒãƒ€ãƒ¡ãªãƒ«ãƒ¼ãƒ«ï¼‰ã‚’å®ˆã‚‹ãŸã‚ã®â€œç ¦â€** ã§ã—ãŸã‚ˆã­ğŸ”’ğŸ°
ã ã‹ã‚‰é›†ç´„ã®ä¸­èº«ã¯ã€ã§ãã‚‹ã ã‘ **ã€Œæ±ºã‚ã‚‹ã€ã€Œè¨ˆç®—ã™ã‚‹ã€ã€ŒçŠ¶æ…‹ã‚’é·ç§»ã•ã›ã‚‹ã€** ã¿ãŸã„ãª â€œæ€è€ƒç³»â€ ã«å¯„ã›ã¾ã™ğŸ§©

é€†ã«ã€é›†ç´„ã®ä¸­ã« **DBã‚¢ã‚¯ã‚»ã‚¹ãƒ»HTTPãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ç¾åœ¨æ™‚åˆ»å–å¾—** ã¿ãŸã„ãª **I/Oï¼ˆå¤–ã®ä¸–ç•Œã¨ã®é€šä¿¡ï¼‰** ã‚’å…¥ã‚Œã‚‹ã¨ã€æ€¥ã«ã‚„ã‚„ã“ã—ããªã‚Šã¾ã™ğŸ˜µâ€ğŸ’«ğŸ’¥
ã€Œãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ãƒ•ãƒ©éƒ½åˆã‹ã‚‰å®ˆã‚‹ã€è€ƒãˆæ–¹ã¨ã—ã¦ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå†…å´ï¼‰ã‚’DBã‚„å¤–éƒ¨APIï¼ˆå¤–å´ï¼‰ã‹ã‚‰åˆ‡ã‚Šé›¢ã™ã®ãŒå®šçŸ³ã§ã™ğŸ§±â¡ï¸ ([AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][1])

---

## 15.2 ãªã‚“ã§é›†ç´„ã«I/Oã‚’å…¥ã‚Œã¡ã‚ƒãƒ€ãƒ¡ãªã®ï¼Ÿï¼ˆäº‹æ•…ã‚‹ãƒã‚¤ãƒ³ãƒˆï¼‰ğŸ˜±ğŸ§¨

### âŒ ç†ç”±1ï¼šãƒ†ã‚¹ãƒˆãŒåœ°ç„ã«ãªã‚‹ğŸ§ªğŸ’”

```mermaid
graph TD
    subgraph Bad ["æ‚ªã„ä¾‹ âŒ (ç™’ç€)"]
        Agg1["é›†ç´„ ğŸ§º"] -->|ç›´å‘¼ã³| DB1[("DB / API ğŸ”Œ")]
    end
    
    subgraph Good ["è‰¯ã„ä¾‹ âœ… (åˆ†é›¢)"]
        direction LR
        S["App Service ğŸ“¦"] -->|1. Data| DB2[("DB / API ğŸ”Œ")]
        S -->|2. Logic| Agg2["é›†ç´„ ğŸ§º"]
    end
    
    style Bad fill:#ffebee,stroke:#c62828
    style Good fill:#e8f5e9,stroke:#2e7d32
```

### âŒ ç†ç”±1ï¼šãƒ†ã‚¹ãƒˆãŒåœ°ç„ã«ãªã‚‹ğŸ§ªğŸ’”

é›†ç´„ãŒDBã‚„HTTPã‚’å‘¼ã¶ã¨ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒ **ã€Œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»DBãƒ»æ™‚åˆ»ã€** ã«æŒ¯ã‚Šå›ã•ã‚Œã¾ã™ğŸŒªï¸
æœ¬å½“ã¯é›†ç´„ã®ãƒ†ã‚¹ãƒˆã£ã¦ã€Œå…¥åŠ›â†’åˆ¤å®šâ†’çŠ¶æ…‹å¤‰åŒ–ã€ã‚’ã‚µã‚¯ãƒƒã¨è¦‹ãŸã„ã ã‘ãªã®ã«ã­â€¦ğŸ¥²

### âŒ ç†ç”±2ï¼šé›†ç´„ãŒâ€œæ±šã‚ŒãŸä¾å­˜â€ã§å¤ªã‚‹ğŸ·ğŸ“¦

é›†ç´„ãŒ `fetch()` ã‚„ DB ã‚¯ã‚¨ãƒªã‚’çŸ¥ã£ãŸç¬é–“ã€
ã€Œãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸­å¿ƒã€ã ã£ãŸã¯ãšãŒã€Œãªã‚“ã§ã‚‚å±‹ã€ã«ãªã£ã¦è‚¥å¤§åŒ–ã—ã¾ã™ğŸ”ğŸŸ

### âŒ ç†ç”±3ï¼šãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•ŒãŒãã¡ã‚ƒã‚‹ğŸ§¯

é›†ç´„ã®ä¸­ã§å¤–éƒ¨I/Oã‚’å§‹ã‚ã‚‹ã¨ã€
ã€Œå¤±æ•—ã—ãŸã‚‰å…¨éƒ¨æˆ»ã™ã€ã¿ãŸã„ãªæ•´ç†ãŒé›£ã—ããªã‚Šã¾ã™ï¼ˆå¤–éƒ¨APIã¯æˆ»ã›ãªã„ã“ã¨å¤šã„ğŸ˜‡ï¼‰

### âŒ ç†ç”±4ï¼šä¾å­˜ã®å‘ããŒé€†ã«ãªã‚‹ğŸ§­ğŸ’¥

ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã®åŸºæœ¬ã¯
**ã€Œå†…å´ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ã¯å¤–å´ï¼ˆDB/ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼‰ã‚’çŸ¥ã‚‰ãªã„ã€** ã§ã™ğŸ§±
ç‰¹ã«ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã¯ã€DBã‚„å¤–éƒ¨APIãªã©ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’éš”é›¢ã™ã‚‹ã®ãŒç›®çš„ã ã‚ˆã€œã£ã¦èª¬æ˜ã•ã‚Œã¾ã™ğŸ“Œ ([AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][1])

---

## 15.3 ã“ã“è¶…é‡è¦ï¼ã€Œé›†ç´„ã«å…¥ã‚Œã¦OK / ãƒ€ãƒ¡ã€æ—©è¦‹è¡¨ğŸ“‹âœ¨

| ãŸã¶ã‚“ã‚„ã‚ŠãŸã„ã“ã¨            | é›†ç´„ã®ä¸­ã«å…¥ã‚Œã¦OKï¼Ÿ | ç½®ãå ´æ‰€ã®ãŠã™ã™ã‚            | ç†ç”±           |
| -------------------- | ----------: | -------------------- | ------------ |
| åˆè¨ˆé‡‘é¡è¨ˆç®—ğŸ§®             |        âœ… OK | é›†ç´„ï¼ˆEntity/VOï¼‰        | ç´”ç²‹è¨ˆç®—ã§å®‰å…¨      |
| çŠ¶æ…‹é·ç§»ï¼ˆCreatedâ†’Paidï¼‰ğŸ” |        âœ… OK | é›†ç´„                   | ä¸å¤‰æ¡ä»¶ã®ä¸­å¿ƒ      |
| ä¸å¤‰æ¡ä»¶ãƒã‚§ãƒƒã‚¯ğŸ”’           |        âœ… OK | é›†ç´„                   | â€œæœ€å¾Œã®ç ¦â€       |
| ä¹±æ•°ç”ŸæˆğŸ²               |     âš ï¸ åŸºæœ¬NG | ã‚¢ãƒ—ãƒªå±¤ã§ä½œã£ã¦æ¸¡ã™ / PortåŒ–   | ãƒ†ã‚¹ãƒˆå†ç¾æ€§ãŒæ­»ã¬    |
| ç¾åœ¨æ™‚åˆ»å–å¾—ğŸ•’             |     âš ï¸ åŸºæœ¬NG | Clockï¼ˆPortï¼‰/ ã‚¢ãƒ—ãƒªå±¤ã§æ¸¡ã™ | ãƒ†ã‚¹ãƒˆãŒä¸å®‰å®šã«     |
| DBä¿å­˜/å–å¾—ğŸ—„ï¸           |        âŒ NG | Repositoryï¼ˆã‚¢ãƒ—ãƒªå±¤ã‹ã‚‰å‘¼ã¶ï¼‰ | ä¾å­˜é€†è»¢ï¼†è‚¥å¤§åŒ–     |
| å¤–éƒ¨APIå‘¼ã³å‡ºã—ğŸŒ          |        âŒ NG | ã‚¢ãƒ—ãƒªå±¤ or Adapter      | å¤±æ•—ãƒ»å†è©¦è¡Œãƒ»è£œå„ŸãŒå¿…è¦ |
| ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œğŸ“             |        âŒ NG | Adapter              | ç’°å¢ƒä¾å­˜ãŒå¼·ã„      |
| ãƒ­ã‚°å‡ºåŠ›ğŸ§¾               |     âš ï¸ åŸå‰‡NG | ã‚¢ãƒ—ãƒªå±¤ï¼ˆã¾ãŸã¯æ¨ªæ–­ï¼‰          | I/Oã§ã‚ã‚Šå‰¯ä½œç”¨    |

ãƒã‚¤ãƒ³ãƒˆã¯ã“ã‚ŒğŸ‘‡
**é›†ç´„ï¼ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹å ´æ‰€**
**I/Oï¼å¤–ã®ä¸–ç•Œã¨ã®â€œã‚„ã‚Šã¨ã‚Šâ€ã¯å¤–ã§ã‚„ã‚‹** ğŸšªâœ¨ ([AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][1])

---

## 15.4 ã‚ã‚ŠãŒã¡ãªã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ‚ªã„ä¾‹ï¼‰ğŸ˜‡ğŸ’£

ãƒŸãƒ‹ECé¡Œæï¼šæ³¨æ–‡ï¼ˆOrderï¼‰é›†ç´„ãŒã€Œåœ¨åº«ã‚’DBã§è¦‹ã«è¡Œã£ã¦ã‹ã‚‰ã€æ³¨æ–‡ç¢ºå®šã—ã¡ã‚ƒã†ä¾‹ğŸ‘‡

```ts
// âŒ æ‚ªã„ä¾‹ï¼šé›†ç´„ãŒI/Oï¼ˆRepositoryï¼‰ã‚’ç›´ã«è§¦ã£ã¦ã‚‹
class Order {
  private status: "Draft" | "Placed" = "Draft";

  place(repo: StockRepository) { // â† é›†ç´„ãŒRepositoryä¾å­˜ã—ã¡ã‚ƒã£ãŸï¼
    const ok = repo.hasEnoughStock(/* ... */); // â† DBã«è¡Œãã‹ã‚‚ã—ã‚Œãªã„
    if (!ok) throw new Error("åœ¨åº«ä¸è¶³");

    this.status = "Placed";
    repo.reserve(/* ... */); // â† ã•ã‚‰ã«I/Oï¼
  }
}

interface StockRepository {
  hasEnoughStock(...args: any[]): boolean;
  reserve(...args: any[]): void;
}
```

ã“ã‚Œã€ã±ã£ã¨è¦‹ã€Œä¾¿åˆ©ã€ãªã‚“ã ã‘ã©â€¦

* ãƒ†ã‚¹ãƒˆã§Repositoryãƒ¢ãƒƒã‚¯ãŒå¿…é ˆğŸ§¸
* `place()` ã®è²¬å‹™ãŒã€Œåˆ¤æ–­ï¼‹I/Oã€ã«ãªã£ã¦è†¨å¼µğŸ·
* å¤±æ•—æ™‚ã®æ•´åˆæ€§ãŒåœ°ç„ğŸ˜±
  ã£ã¦æ„Ÿã˜ã§ã€ã˜ã‚ã˜ã‚å£Šã‚Œã¾ã™ğŸ§¨

---

### âœ… æ­£ã—ã„å½¢ï¼ˆç‹é“ï¼‰ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ãŒI/Oã—ã¦ã€é›†ç´„ã¯åˆ¤æ–­ã ã‘ğŸ‘‘

```mermaid
sequenceDiagram
    participant S as App Service ğŸ“¦
    participant DB as Repository / API ğŸ”Œ
    participant A as é›†ç´„ (Domain) ğŸ§ 
    
    S->>DB: 1. å¤–ã®ä¸–ç•Œã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹
    DB-->>S: 
    S->>A: 2. é›†ã¾ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦åˆ¤æ–­ãƒ»æ›´æ–°ã‚’é ¼ã‚€
    Note over A: ç´”ç²‹ãªãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯ğŸ”’
    A-->>S: 
    S->>DB: 3. å¤‰ã‚ã£ãŸçµæœã‚’ä¿å­˜ãƒ»å®Ÿè¡Œã™ã‚‹
```

---
```ts
// âœ… é›†ç´„ã¯ã€Œåˆ¤æ–­ã¨çŠ¶æ…‹é·ç§»ã€ã ã‘
class Order {
  private status: "Draft" | "Placed" = "Draft";

  place(canReserve: boolean) {
    if (this.status !== "Draft") throw new Error("çŠ¶æ…‹ãŒä¸æ­£");
    if (!canReserve) throw new Error("åœ¨åº«ä¸è¶³");
    this.status = "Placed";
  }
}

// âœ… I/Oã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹å´ã§ã‚„ã‚‹
class PlaceOrderService {
  constructor(private stockRepo: StockRepository, private orderRepo: OrderRepository) {}

  async execute(orderId: string) {
    const order = await this.orderRepo.findById(orderId);

    const canReserve = await this.stockRepo.hasEnoughStock(/* orderã®å†…å®¹ */);
    order.place(canReserve); // â† é›†ç´„ã¯åˆ¤æ–­ã ã‘ï¼

    await this.orderRepo.save(order);
    if (canReserve) await this.stockRepo.reserve(/* ... */);
  }
}

interface StockRepository {
  hasEnoughStock(...args: any[]): Promise<boolean>;
  reserve(...args: any[]): Promise<void>;
}

interface OrderRepository {
  findById(id: string): Promise<Order>;
  save(order: Order): Promise<void>;
}
```

ã“ã®å½¢ã«ã™ã‚‹ã¨ã€é›†ç´„ãƒ†ã‚¹ãƒˆãŒè¶…ãƒ©ã‚¯ã«ãªã‚Šã¾ã™ğŸ§ªâœ¨
`order.place(true)` / `order.place(false)` ã§ç¢ºèªã§ãã‚‹ã‹ã‚‰ã­ğŸ’•

---

## 15.6 ã€Œã§ã‚‚ç¾åœ¨æ™‚åˆ»ãŒå¿…è¦ãªã‚“ã ã‘ã©ï¼Ÿã€ã®æ‰±ã„ğŸ•’ğŸ§ 

ãŸã¨ãˆã°ã€Œæ³¨æ–‡ã¯30åˆ†ä»¥å†…ã«æ”¯æ‰•ã„ã—ãªã„ã¨æœŸé™åˆ‡ã‚Œã€ã¿ãŸã„ãªãƒ«ãƒ¼ãƒ«ã€æ™‚åˆ»ãŒæ¬²ã—ã„ã‚ˆã­â³

### âŒ é›†ç´„ã®ä¸­ã§ `new Date()` ã—ã¡ã‚ƒã†ã¨â€¦

* ãƒ†ã‚¹ãƒˆãŒä¸å®‰å®šï¼ˆå®Ÿè¡Œã—ãŸç¬é–“ã§çµæœãŒå¤‰ã‚ã‚‹ï¼‰ğŸ˜µâ€ğŸ’«
* â€œä»Šâ€ã«ä¾å­˜ã—ã¦å†ç¾ä¸èƒ½ã«ãªã‚‹ğŸ’”

### âœ… ã‚ˆãã‚ã‚‹è§£æ±ºï¼šClockï¼ˆãƒãƒ¼ãƒˆï¼‰ã‹ã€æ™‚åˆ»ã‚’å¼•æ•°ã§æ¸¡ã™âŒšâœ¨

**â‘  å¼•æ•°ã§æ¸¡ã™ï¼ˆã„ã¡ã°ã‚“ç°¡å˜ï¼‰**

```ts
class Order {
  expireIfNeeded(now: Date) {
    // nowã‚’åŸºæº–ã«æœŸé™åˆ‡ã‚Œåˆ¤å®šã™ã‚‹
  }
}
```

**â‘¡ Portï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã§æŠ½è±¡åŒ–ã™ã‚‹**ï¼ˆãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã®ç™ºæƒ³ï¼‰

```ts
interface Clock {
  now(): Date;
}

class Order {
  expireIfNeeded(clock: Clock) {
    const now = clock.now();
    // æœŸé™åˆ‡ã‚Œåˆ¤å®šâ€¦
  }
}
```

ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã¯ã€å¤–éƒ¨ã¨ã®I/Oã‚’ã‚¢ãƒ€ãƒ—ã‚¿å´ã«å¯„ã›ã¦ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ç‹¬ç«‹ã•ã›ã‚‹ã®ãŒç‹™ã„ã§ã™ğŸ§±âœ¨ ([AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][1])

---

## 15.7 ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã§ã€Œå‰¯ä½œç”¨ã‚’å¤–ã«è¿½ã„å‡ºã™ã€ğŸ“£ğŸ“®ï¼ˆã¡ã‚‡ã„å…ˆå–ã‚Šï¼‰

é›†ç´„ã®ä¸­ã§ã¯ã€Œæ”¯æ‰•ã„å®Œäº†ã—ãŸï¼ã€ã¿ãŸã„ãª **äº‹å®Ÿï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰** ã‚’è¨˜éŒ²ã™ã‚‹ã ã‘ã«ã—ã¦ã€
ãƒ¡ãƒ¼ãƒ«é€ä¿¡ğŸ“§ã‚„å¤–éƒ¨æ±ºæ¸ˆç…§ä¼šğŸ’³ã¿ãŸã„ãªå‰¯ä½œç”¨ã¯å¤–ã§ã‚„ã‚‹ã®ãŒã‚­ãƒ¬ã‚¤ã§ã™âœ¨

ï¼ˆã“ã®è€ƒãˆæ–¹ã¯å¾ŒåŠç« ã§æœ¬æ ¼çš„ã«ã‚„ã‚‹ã‚ˆã€œï¼ğŸ“šï¼‰

---

## 15.8 ã™ãã§ãã‚‹ï¼ãƒŸãƒ‹æ¼”ç¿’âœï¸ğŸ§ª

### æ¼”ç¿’Aï¼šI/Oè¿½ã„å‡ºã—ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ğŸƒâ€â™€ï¸ğŸ’¨

æ¬¡ã®è¦ç´ ãŒã€Œé›†ç´„ã®ä¸­ã€ã«ã„ãŸã‚‰ã€å¤–ã¸è¿½ã„å‡ºã—ã¦ã­ğŸ‘‡

* DBå–å¾—
* HTTPå‘¼ã³å‡ºã—
* ç¾åœ¨æ™‚åˆ»å–å¾—
* ä¹±æ•°ç”Ÿæˆ

**ç›®æ¨™**ï¼šé›†ç´„ãƒ¡ã‚½ãƒƒãƒ‰ãŒã€Œå¼•æ•°â†’ãƒã‚§ãƒƒã‚¯â†’çŠ¶æ…‹å¤‰æ›´ã€ã ã‘ã«ãªã‚‹ã“ã¨âœ…âœ¨

### æ¼”ç¿’Bï¼šãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦â€œå‹ã¡â€ã‚’ä½“é¨“ğŸ§ªğŸ†

```ts
import { describe, it, expect } from "vitest";

describe("Order.place", () => {
  it("åœ¨åº«OKãªã‚‰Placedã«ãªã‚‹", () => {
    const order = new Order();
    order.place(true);
    expect(order.getStatus()).toBe("Placed");
  });

  it("åœ¨åº«NGãªã‚‰ã‚¨ãƒ©ãƒ¼", () => {
    const order = new Order();
    expect(() => order.place(false)).toThrow("åœ¨åº«ä¸è¶³");
  });
});
```

ã“ã†ã„ã†ãƒ†ã‚¹ãƒˆãŒã‚¹ãƒ«ã‚¹ãƒ«æ›¸ã‘ãŸã‚‰ã€I/Oåˆ†é›¢ã§ãã¦ã‚‹ã‚µã‚¤ãƒ³ã ã‚ˆã€œğŸ’–âœ¨

---

## 15.9 ã€Œé›†ç´„ã«å…¥ã‚Œã¦OKï¼Ÿã€ã‚¯ã‚¤ã‚ºğŸ®âœ¨ï¼ˆâ—‹Ã—ã§ç­”ãˆã¦ã­ï¼‰

1. é›†ç´„ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ `fetch()` ã‚’å‘¼ã¶ ğŸŒ
2. é›†ç´„ãƒ¡ã‚½ãƒƒãƒ‰ã¯ `canReserve: boolean` ã‚’å¼•æ•°ã«å—ã‘å–ã£ã¦åˆ¤å®šã™ã‚‹ âœ…
3. é›†ç´„ã®ä¸­ã§ `new Date()` ã‚’å‘¼ã‚“ã§æœŸé™åˆ¤å®šã™ã‚‹ ğŸ•’
4. é›†ç´„ã®ä¸­ã§ã€ŒOrderPaidã€ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã‚’é…åˆ—ã«ç©ã‚€ ğŸ“£
5. é›†ç´„ã®ä¸­ã§SQLæ–‡å­—åˆ—ã‚’çµ„ã¿ç«‹ã¦ã‚‹ ğŸ—„ï¸

ç­”ãˆğŸ‘‡

1. âŒã€€2) âœ…ã€€3) âŒï¼ˆå·¥å¤«ã™ã‚Œã°OKå¯„ã‚Šã«ã§ãã‚‹ï¼‰ã€€4) âœ…ã€€5) âŒ

---

## 15.10 AIæ´»ç”¨ğŸ¤–âœ¨ï¼ˆã“ã®ç« ã§ã®ä½¿ã„ã©ã“ã‚ï¼‰

* ã€Œã“ã®å‡¦ç†ã¯I/Oï¼Ÿãã‚Œã¨ã‚‚ç´”ç²‹ãƒ­ã‚¸ãƒƒã‚¯ï¼Ÿã€åˆ¤å®šã‚¯ã‚¤ã‚ºã‚’ä½œã£ã¦ã‚‚ã‚‰ã†ğŸ®
* æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã£ã¦ã€Œé›†ç´„ãŒI/Oã—ã¦ã‚‹ç®‡æ‰€ã‚’æŒ‡æ‘˜ã—ã¦ã€åˆ†é›¢æ¡ˆã‚’3ã¤å‡ºã—ã¦ã€ã£ã¦é ¼ã‚€ğŸ§ 
* ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æŠœã‘ï¼ˆå¢ƒç•Œå€¤ãƒ»çŠ¶æ…‹é·ç§»ï¼‰ã‚’åˆ—æŒ™ã•ã›ã‚‹ğŸ§ªğŸ’ª

---

## 15.11 ã¾ã¨ã‚ï¼šé›†ç´„ã¯â€œãƒ«ãƒ¼ãƒ«æ‹…å½“â€ã€I/Oã¯â€œå¤–ã®ä¸–ç•Œæ‹…å½“â€ğŸ§±âœ¨

* é›†ç´„ã¯ **ä¸å¤‰æ¡ä»¶ã¨çŠ¶æ…‹é·ç§»** ã«é›†ä¸­ğŸ”’ğŸ”
* I/Oï¼ˆDB/HTTP/ãƒ•ã‚¡ã‚¤ãƒ«/æ™‚åˆ»/ä¹±æ•°ï¼‰ã¯åŸºæœ¬ **é›†ç´„ã®å¤–ã¸** ğŸš«ğŸ”Œ
* ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ï¼ã‚¯ãƒªãƒ¼ãƒ³ã®è€ƒãˆæ–¹ã§ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å¤–éƒ¨ã‹ã‚‰å®ˆã‚‹ğŸ›¡ï¸ ([AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][1])

### æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆâœ…

* [ ] é›†ç´„ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€Œå¼•æ•°â†’åˆ¤å®šâ†’çŠ¶æ…‹å¤‰æ›´ã€ã«ãªã£ã¦ã‚‹ï¼Ÿ
* [ ] `fetch()` / DB / ãƒ•ã‚¡ã‚¤ãƒ« / æ™‚åˆ»å–å¾—ãŒé›†ç´„ã®ä¸­ã«ãªã„ï¼Ÿ
* [ ] é›†ç´„ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒ â€œç°¡å˜ã«â€ æ›¸ã‘ã‚‹ï¼ŸğŸ§ªâœ¨

[1]: https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com "Hexagonal architecture pattern - AWS Prescriptive Guidance"
